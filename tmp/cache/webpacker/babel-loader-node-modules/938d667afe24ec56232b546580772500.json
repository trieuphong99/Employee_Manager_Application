{"ast":null,"code":"import actionTypes from '../../commons/const/actionTypes';\nimport axios from 'axios';\nimport { showLoading, hideLoading } from './loading';\nimport { toastSuccess, toastError } from '../../commons/helpers/toastHelpers'; // import fakeData from '../../../../db'\n// import MockAdapter from 'axios-mock-adapter'\n// var mock = new MockAdapter(axios);\n// mock.onGet('/admin/user_timesheets').reply(200, fakeData.currentusertimesheet);\n// mock.onGet('admin/users').reply(200, fakeData.users);\n// mock.onGet('admin/users/14').reply(200, fakeData.users[3]);\n// mock.onPost('/users/14/change_password').reply(200);\n// mock.onGet('/admin/user_dayoffs').reply(200, fakeData.dayoff);\n// mock.onPatch('/admin/uesr_dayoffs/14').reply(200, fakeData.dayoff[0]);\n// mock.onGet('/admin/user_overtimes').reply(200, fakeData.overtime);\n// mock.onPatch('admin/user_overtimes/14').reply(200, fakeData.overtime[0]);\n\nexport var getStaffTimeSheetByAdmin = function getStaffTimeSheetByAdmin(date, user_id, current_page, sort_type, sort_field, filter_type) {\n  var params = {\n    from_date: date.startTime,\n    to_date: date.endTime,\n    user_id: user_id,\n    current_page: String(current_page),\n    sort_type: sort_type,\n    sort_field: sort_field,\n    filter_type: filter_type\n  };\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios.get('/admin/user_timesheets', {\n      params: params\n    }).then(function (res) {\n      dispatch(setTimeSheet(res.data));\n    })[\"catch\"](function (error) {\n      console.log(error);\n    })[\"finally\"](function () {\n      dispatch(hideLoading());\n    });\n  };\n};\nexport var setTimeSheet = function setTimeSheet(data) {\n  return {\n    type: actionTypes.setTimeSheet,\n    data: data\n  };\n};\nexport var setUpdateTimeSheet = function setUpdateTimeSheet(id, start_at, end_at) {\n  var body = {\n    start_at: String(start_at),\n    end_at: String(end_at)\n  };\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios.patch(\"/admin/user_timesheets/\".concat(id), body).then(function (res) {\n      // dispatch({type: actionTypes.SET_UPDATE_TIMESHEETS, data: res.data})\n      toastSuccess('Successful');\n    })[\"catch\"](function (er) {\n      toastError(er);\n    })[\"finally\"](function () {\n      dispatch(hideLoading());\n    });\n  };\n};","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/actions/timeSheet.js"],"names":["actionTypes","axios","showLoading","hideLoading","toastSuccess","toastError","getStaffTimeSheetByAdmin","date","user_id","current_page","sort_type","sort_field","filter_type","params","from_date","startTime","to_date","endTime","String","dispatch","get","then","res","setTimeSheet","data","error","console","log","type","setUpdateTimeSheet","id","start_at","end_at","body","patch","er"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,iCAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,WAAzC;AACA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,oCAAzC,C,CACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,IAAD,EAAOC,OAAP,EAAgBC,YAAhB,EAA8BC,SAA9B,EAAyCC,UAAzC,EAAqDC,WAArD,EAAqE;AAC3G,MAAMC,MAAM,GAAG;AACbC,IAAAA,SAAS,EAAEP,IAAI,CAACQ,SADH;AAEbC,IAAAA,OAAO,EAAET,IAAI,CAACU,OAFD;AAGbT,IAAAA,OAAO,EAAEA,OAHI;AAIbC,IAAAA,YAAY,EAAES,MAAM,CAACT,YAAD,CAJP;AAKbC,IAAAA,SAAS,EAAEA,SALE;AAMbC,IAAAA,UAAU,EAAEA,UANC;AAObC,IAAAA,WAAW,EAAEA;AAPA,GAAf;AASA,SAAO,UAACO,QAAD,EAAc;AACnBA,IAAAA,QAAQ,CAACjB,WAAW,EAAZ,CAAR;AACAD,IAAAA,KAAK,CAACmB,GAAN,CAAU,wBAAV,EAAoC;AAAEP,MAAAA,MAAM,EAAEA;AAAV,KAApC,EACGQ,IADH,CACQ,UAAUC,GAAV,EAAe;AACnBH,MAAAA,QAAQ,CAACI,YAAY,CAACD,GAAG,CAACE,IAAL,CAAb,CAAR;AACD,KAHH,WAIS,UAAUC,KAAV,EAAiB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,KANH,aAOW,YAAY;AACnBN,MAAAA,QAAQ,CAAChB,WAAW,EAAZ,CAAR;AACD,KATH;AAUD,GAZD;AAaD,CAvBM;AAyBP,OAAO,IAAMoB,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAU;AAAE,SAAO;AAAEI,IAAAA,IAAI,EAAE5B,WAAW,CAACuB,YAApB;AAAkCC,IAAAA,IAAI,EAAEA;AAAxC,GAAP;AAAuD,CAAxF;AAEP,OAAO,IAAMK,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,EAAD,EAAKC,QAAL,EAAeC,MAAf,EAA0B;AAC1D,MAAMC,IAAI,GAAG;AACXF,IAAAA,QAAQ,EAAEb,MAAM,CAACa,QAAD,CADL;AAEXC,IAAAA,MAAM,EAAEd,MAAM,CAACc,MAAD;AAFH,GAAb;AAIA,SAAO,UAAAb,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACjB,WAAW,EAAZ,CAAR;AACAD,IAAAA,KAAK,CAACiC,KAAN,kCAAsCJ,EAAtC,GAA4CG,IAA5C,EACCZ,IADD,CACM,UAAAC,GAAG,EAAI;AACX;AACAlB,MAAAA,YAAY,CAAC,YAAD,CAAZ;AACD,KAJD,WAKO,UAAA+B,EAAE,EAAI;AACX9B,MAAAA,UAAU,CAAC8B,EAAD,CAAV;AACD,KAPD,aAQS,YAAM;AACbhB,MAAAA,QAAQ,CAAChB,WAAW,EAAZ,CAAR;AACD,KAVD;AAWD,GAbD;AAcD,CAnBM","sourcesContent":["import actionTypes from '../../commons/const/actionTypes';\nimport axios from 'axios'\nimport { showLoading, hideLoading } from './loading'\nimport { toastSuccess, toastError } from '../../commons/helpers/toastHelpers';\n// import fakeData from '../../../../db'\n// import MockAdapter from 'axios-mock-adapter'\n// var mock = new MockAdapter(axios);\n\n// mock.onGet('/admin/user_timesheets').reply(200, fakeData.currentusertimesheet);\n// mock.onGet('admin/users').reply(200, fakeData.users);\n// mock.onGet('admin/users/14').reply(200, fakeData.users[3]);\n// mock.onPost('/users/14/change_password').reply(200);\n// mock.onGet('/admin/user_dayoffs').reply(200, fakeData.dayoff);\n// mock.onPatch('/admin/uesr_dayoffs/14').reply(200, fakeData.dayoff[0]);\n// mock.onGet('/admin/user_overtimes').reply(200, fakeData.overtime);\n// mock.onPatch('admin/user_overtimes/14').reply(200, fakeData.overtime[0]);\n\nexport const getStaffTimeSheetByAdmin = (date, user_id, current_page, sort_type, sort_field, filter_type) => {\n  const params = {\n    from_date: date.startTime,\n    to_date: date.endTime,\n    user_id: user_id,\n    current_page: String(current_page),\n    sort_type: sort_type,\n    sort_field: sort_field,\n    filter_type: filter_type\n  }\n  return (dispatch) => {\n    dispatch(showLoading())\n    axios.get('/admin/user_timesheets', { params: params })\n      .then(function (res) {\n        dispatch(setTimeSheet(res.data))\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n      .finally(function () {\n        dispatch(hideLoading())\n      });\n  }\n}\n\nexport const setTimeSheet = (data) => { return { type: actionTypes.setTimeSheet, data: data } }\n\nexport const setUpdateTimeSheet = (id, start_at, end_at) => {\n  const body = {\n    start_at: String(start_at),\n    end_at: String(end_at)\n  }\n  return dispatch => {\n    dispatch(showLoading())\n    axios.patch(`/admin/user_timesheets/${id}`, body)\n    .then(res => {\n      // dispatch({type: actionTypes.SET_UPDATE_TIMESHEETS, data: res.data})\n      toastSuccess('Successful');\n    })\n    .catch(er => {\n      toastError(er)\n    })\n    .finally(() => {\n      dispatch(hideLoading())\n    })\n  }\n}"]},"metadata":{},"sourceType":"module"}