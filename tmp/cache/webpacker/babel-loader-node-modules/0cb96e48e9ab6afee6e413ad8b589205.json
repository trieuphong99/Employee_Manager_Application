{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/phong/rails/imp/app/javascript/staff/components/timesheets/tabRequest/editRequestModal.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport TimePickerTime from '../../../../commons/components/TimePicker/timePicker';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport Time from '../../../../commons/const/Time';\nimport { editRequestStaff } from '../../../actions/timeSheet';\nimport { toastError } from '../../../../commons/helpers/toastHelpers';\n\nvar EditRequest = function EditRequest(props) {\n  var data = props.data,\n      id = props.id;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      startTime = _useState4[0],\n      setStartTime = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      reasonIn = _useState6[0],\n      setReasonIn = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      endTime = _useState8[0],\n      setEndTime = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      reasonOut = _useState10[0],\n      setReasonOut = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      reason = _useState12[0],\n      setReason = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      required = _useState14[0],\n      setRequired = _useState14[1];\n\n  var toggle = function toggle() {\n    return setIsOpen(!isOpen);\n  };\n\n  var dispatch = useDispatch();\n\n  var updateRequest = function updateRequest() {\n    var startAt = moment(\"\".concat(data.date, \" \").concat(startTime), Time.FullDayFirst)._i;\n\n    var endAt = moment(\"\".concat(data.date, \" \").concat(endTime), Time.FullDayFirst)._i;\n\n    var startOrigin = moment(\"\".concat(data.date, \" \").concat(data.start_at), Time.FullDayFirst)._i;\n\n    var endOrigin = moment(\"\".concat(data.date, \" \").concat(data.end_at), Time.FullDayFirst)._i;\n\n    dispatch(editRequestStaff(id, data.date, startTime ? startAt : data.start_at && startOrigin, endTime ? endAt : data.end_at && endOrigin, reasonIn ? reasonIn : data.reason_in, reasonOut ? reasonOut : data.reason_out, reason ? reason : data.reason));\n  };\n\n  var handleClick = function handleClick() {\n    if (startTime === undefined && endTime === undefined && reasonIn === undefined && reasonOut === undefined && reason === undefined) {\n      toastError('Nothing change!');\n    } else if (reason === '') {\n      setRequired(true);\n    } else if (reasonIn && !reasonIn.match(/[a-zA-Z]+/) || reasonOut && !reasonOut.match(/[a-zA-Z]+/) || reason && !reason.match(/[a-zA-Z]+/)) {\n      toastError('Invalid!');\n    } else {\n      updateRequest();\n      handleToggle();\n    }\n  };\n\n  var handleToggle = function handleToggle() {\n    setReasonIn();\n    setReasonOut();\n    setReason();\n    setRequired(false);\n    toggle();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"info\",\n    onClick: toggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isOpen,\n    toggle: toggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: function toggle() {\n      return handleToggle();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, \"Edit request timesheet\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, data.date)), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Checkin\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TimePickerTime, {\n    time: data.start_at && data.start_at,\n    setTime: function setTime(e) {\n      setStartTime(moment(e._d).format(Time.HM));\n      handleShow();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, \"Reason checkin late\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    key: data.reason_in,\n    defaultValue: data.reason_in && data.reason_in,\n    onChange: function onChange(e) {\n      return setReasonIn(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), reasonIn && !reasonIn.match(/[a-zA-Z]+/) && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 61\n    }\n  }, \"Invalid reason in late!\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Checkout\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TimePickerTime, {\n    time: data.end_at ? data.end_at : '00:00',\n    setTime: function setTime(e) {\n      setEndTime(moment(e._d).format(Time.HM));\n      handleShow();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"Reason checkout early\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    key: data.reason_out,\n    defaultValue: data.reason_out && data.reason_out,\n    onChange: function onChange(e) {\n      return setReasonOut(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }), reasonOut && !reasonOut.match(/[a-zA-Z]+/) && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 63\n    }\n  }, \"Invalid reason leave early!\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"Reason request edit time checkin, checkout\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    key: data.reason,\n    defaultValue: data.reason,\n    onChange: function onChange(e) {\n      setReason(e.target.value);\n      setRequired(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), required && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 27\n    }\n  }, \"Reason is a required field!\"), reason && !reason.match(/[a-zA-Z]+/) && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 57\n    }\n  }, \"Invalid reason!\")))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    onClick: function onClick() {\n      return handleClick();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return handleToggle();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Cancel\"))));\n};\n\nexport default EditRequest;","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/staff/components/timesheets/tabRequest/editRequestModal.js"],"names":["React","useState","Modal","ModalHeader","ModalBody","ModalFooter","Input","Button","TimePickerTime","useDispatch","moment","Time","editRequestStaff","toastError","EditRequest","props","data","id","isOpen","setIsOpen","startTime","setStartTime","reasonIn","setReasonIn","endTime","setEndTime","reasonOut","setReasonOut","reason","setReason","required","setRequired","toggle","dispatch","updateRequest","startAt","date","FullDayFirst","_i","endAt","startOrigin","start_at","endOrigin","end_at","reason_in","reason_out","handleClick","undefined","match","handleToggle","e","_d","format","HM","handleShow","target","value","color","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport TimePickerTime from '../../../../commons/components/TimePicker/timePicker';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport Time from '../../../../commons/const/Time';\nimport { editRequestStaff } from '../../../actions/timeSheet';\nimport { toastError } from '../../../../commons/helpers/toastHelpers';\n\nconst EditRequest = (props) => {\n  const {data, id} = props;\n  const [isOpen, setIsOpen] = useState(false);\n  const [startTime, setStartTime] = useState();\n  const [reasonIn, setReasonIn] = useState();\n  const [endTime, setEndTime] = useState();\n  const [reasonOut, setReasonOut] = useState();\n  const [reason, setReason] = useState();\n  const [required, setRequired] = useState(false);\n  const toggle = () => setIsOpen(!isOpen);\n  const dispatch = useDispatch();\n  const updateRequest = () => {\n    let startAt = moment(`${data.date} ${startTime}`, Time.FullDayFirst)._i;\n    let endAt = moment(`${data.date} ${endTime}`, Time.FullDayFirst)._i;\n    let startOrigin = moment(`${data.date} ${data.start_at}`, Time.FullDayFirst)._i;\n    let endOrigin = moment(`${data.date} ${data.end_at}`, Time.FullDayFirst)._i;\n    dispatch(editRequestStaff(id, data.date, startTime ? startAt : (data.start_at && startOrigin), endTime ? endAt : (data.end_at && endOrigin),reasonIn ? reasonIn : data.reason_in, reasonOut ? reasonOut : data.reason_out, reason ? reason : data.reason ))\n  }\n  const handleClick = () => {\n    if(startTime === undefined && endTime === undefined && reasonIn === undefined && reasonOut === undefined && reason === undefined){\n      toastError('Nothing change!');\n    }\n    else if(reason === ''){\n      setRequired(true)\n    }\n    else if((reasonIn && !reasonIn.match(/[a-zA-Z]+/)) || (reasonOut && !reasonOut.match(/[a-zA-Z]+/)) || (reason && !reason.match(/[a-zA-Z]+/)) ){\n      toastError('Invalid!')\n    }\n    else {\n      updateRequest()\n      handleToggle()\n    }\n  }\n  const handleToggle = () => {\n    setReasonIn();\n    setReasonOut();\n    setReason();\n    setRequired(false);\n    toggle();\n  }\n  return (\n    <div>\n      <Button color=\"info\" onClick={toggle} >Edit</Button>\n      <Modal isOpen={isOpen} toggle={toggle}>\n      <ModalHeader toggle={() => handleToggle()}>\n        Edit request timesheet\n      </ModalHeader>\n      <ModalBody>\n        \n          <div className=\"row\">\n          <div className=\"col-4\">Date</div>\n          <div className=\"col-8\">\n            {data.date}\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\">Checkin</div>\n          <div className=\"col-8\">\n            <TimePickerTime time={data.start_at && data.start_at} setTime={e => {setStartTime(moment(e._d).format(Time.HM)); handleShow() }} />\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\">Reason checkin late</div>\n          <div className=\"col-8\">\n            <Input type=\"textarea\" key={data.reason_in} defaultValue={data.reason_in && data.reason_in} onChange={e => setReasonIn(e.target.value)}/>\n            {\n              (reasonIn && !reasonIn.match(/[a-zA-Z]+/)) && <div style={{ color: 'red', fontSize: '80%' }}>Invalid reason in late!</div>\n            }\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\">Checkout</div>\n          <div className=\"col-8\">\n            <TimePickerTime time={data.end_at ? data.end_at : '00:00'} setTime={e => {setEndTime(moment(e._d).format(Time.HM)); handleShow()}} />\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\" >\n          <div className=\"col-4\" >Reason checkout early</div>\n          <div className=\"col-8\" >\n            <Input type=\"textarea\" key={data.reason_out} defaultValue={data.reason_out && data.reason_out} onChange={e => setReasonOut(e.target.value)} />\n            {\n              (reasonOut && !reasonOut.match(/[a-zA-Z]+/)) && <div style={{ color: 'red', fontSize: '80%' }}>Invalid reason leave early!</div>\n            }\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\" >Reason request edit time checkin, checkout</div>\n          <div className=\"col-8\">\n            <Input type=\"textarea\" key={data.reason} defaultValue={data.reason} onChange={e => {setReason(e.target.value); setRequired(false)}} />\n            {\n              required && <div style={{ color: 'red', fontSize: '80%' }}>Reason is a required field!</div>\n            }\n            {\n              (reason && !reason.match(/[a-zA-Z]+/)) && <div style={{ color: 'red', fontSize: '80%' }}>Invalid reason!</div>\n            }\n          </div>\n        </div>\n        \n      </ModalBody>\n        \n      <ModalFooter>\n        <Button color=\"success\" onClick={() => handleClick()} >Submit</Button>\n        <Button color=\"secondary\" onClick={() => handleToggle()}>Cancel</Button>\n      </ModalFooter>\n    </Modal>\n    \n    </div>\n  )\n}\nexport default EditRequest;"]},"metadata":{},"sourceType":"module"}