{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/phong/rails/imp/app/javascript/staff/components/timesheets/tabTimesheet/editReasonModal.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Input, Fade } from 'reactstrap';\nimport moment from 'moment';\nimport Time from '../../../../commons/const/Time';\nimport DatePicker from '../../../helpers/singleDatePicker';\nimport { useDispatch, useSelector } from 'react-redux';\nimport TimePickerTime from '../../../../commons/components/TimePicker/timePicker';\nimport { editReasonCheckinCheckout, requestEditTimeCheckinCheckout, getDetailTimesheetStaff } from '../../../actions/timeSheet';\nimport { toastError } from '../../../../commons/helpers/toastHelpers';\nimport _ from 'lodash';\n\nvar EditReasonModal = function EditReasonModal(props) {\n  var modal = props.modal,\n      toggle = props.toggle,\n      data = props.data;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      startTime = _useState2[0],\n      setStartTime = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      reasonIn = _useState4[0],\n      setReasonIn = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      endTime = _useState6[0],\n      setEndTime = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      reasonOut = _useState8[0],\n      setReasonOut = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      reason = _useState10[0],\n      setReason = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      fade = _useState12[0],\n      setFade = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      required = _useState14[0],\n      setRequired = _useState14[1];\n\n  var dispatch = useDispatch();\n\n  var updateReason = function updateReason() {\n    dispatch(editReasonCheckinCheckout(reasonIn, reasonOut));\n  };\n\n  var requestEdit = function requestEdit() {\n    var startAt = moment(\"\".concat(data.date, \" \").concat(startTime), Time.FullDayFirst)._i;\n\n    var endAt = moment(\"\".concat(data.date, \" \").concat(endTime), Time.FullDayFirst)._i;\n\n    var startOrigin = moment(\"\".concat(data.date, \" \").concat(data.start_at), Time.FullDayFirst)._i;\n\n    var endOrigin = moment(\"\".concat(data.date, \" \").concat(data.end_at), Time.FullDayFirst)._i;\n\n    dispatch(requestEditTimeCheckinCheckout(data.date, startTime ? startAt : data.start_at && startOrigin, endTime ? endAt : data.end_at && endOrigin, reasonIn ? reasonIn : data.reason_in, reasonOut ? reasonOut : data.reason_out, reason));\n  };\n\n  var handClick = function handClick() {\n    if (startTime !== undefined || endTime !== undefined || data.date !== moment().format(Time.crossDMY)) {\n      requestEdit();\n      setFade(false);\n      handleToggle();\n    } else {\n      updateReason();\n      setFade(false);\n      handleToggle();\n    }\n  };\n\n  var handleClick = function handleClick() {\n    if (startTime === undefined && endTime === undefined && reasonIn === undefined && reasonOut === undefined) {\n      toastError('Nothing change!');\n    } else if ((fade || data.date !== moment().format(Time.crossDMY)) && reason === '') {\n      setRequired(true);\n    } else if (reasonIn && !reasonIn.match(/[a-zA-Z]+/) || reasonOut && !reasonOut.match(/[a-zA-Z]+/) || reason && !reason.match(/[a-zA-Z]+/)) {\n      toastError('Invalid!');\n    } else {\n      handClick();\n    }\n  };\n\n  var handleToggle = function handleToggle() {\n    setStartTime();\n    setEndTime();\n    setReasonIn();\n    setReasonOut();\n    setReason('');\n    setFade(false);\n    setRequired(false);\n    toggle();\n  };\n\n  var handleShow = function handleShow() {\n    setFade(true);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modal,\n    toggle: toggle,\n    modalClassName: \"modal-background-color\",\n    backdrop: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: function toggle() {\n      return handleToggle();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, \"Edit reason checkin checkout\"), data && /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, data.date)), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, \"Checkin\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TimePickerTime, {\n    time: data.start_at && data.start_at,\n    setTime: function setTime(e) {\n      setStartTime(moment(e._d).format(Time.HM));\n      handleShow();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"Reason checkin late\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    key: data.reason_in,\n    defaultValue: data.reason_in && data.reason_in,\n    onChange: function onChange(e) {\n      return setReasonIn(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }), reasonIn && !reasonIn.match(/[a-zA-Z]+/) && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 61\n    }\n  }, \"Invalid reason in late!\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Checkout\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TimePickerTime, {\n    time: data.end_at ? data.end_at : '00:00',\n    setTime: function setTime(e) {\n      setEndTime(moment(e._d).format(Time.HM));\n      handleShow();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, \"Reason checkout early\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    key: data.reason_out,\n    defaultValue: data.reason_out && data.reason_out,\n    onChange: function onChange(e) {\n      return setReasonOut(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }), reasonOut && !reasonOut.match(/[a-zA-Z]+/) && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 63\n    }\n  }, \"Invalid reason leave early!\"))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"hr-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }), (fade || data.date !== moment().format(Time.crossDMY)) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 70\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, \"Reason request edit time checkin, checkout\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"textarea\",\n    onChange: function onChange(e) {\n      setReason(e.target.value);\n      setRequired(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }), required && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, \"Reason is a required field!\"), reason && !reason.match(/[a-zA-Z]+/) && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 59\n    }\n  }, \"Invalid reason!\")))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    onClick: function onClick() {\n      return handleClick();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: handleToggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"Cancel\")));\n};\n\nexport default EditReasonModal;","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/staff/components/timesheets/tabTimesheet/editReasonModal.js"],"names":["React","useState","useEffect","Modal","ModalHeader","ModalBody","ModalFooter","Button","Input","Fade","moment","Time","DatePicker","useDispatch","useSelector","TimePickerTime","editReasonCheckinCheckout","requestEditTimeCheckinCheckout","getDetailTimesheetStaff","toastError","_","EditReasonModal","props","modal","toggle","data","startTime","setStartTime","reasonIn","setReasonIn","endTime","setEndTime","reasonOut","setReasonOut","reason","setReason","fade","setFade","required","setRequired","dispatch","updateReason","requestEdit","startAt","date","FullDayFirst","_i","endAt","startOrigin","start_at","endOrigin","end_at","reason_in","reason_out","handClick","undefined","format","crossDMY","handleToggle","handleClick","match","handleShow","e","_d","HM","target","value","color","fontSize"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,WAAxC,EAAqDC,MAArD,EAA6DC,KAA7D,EAAoEC,IAApE,QAAgF,YAAhF;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,gCAAjB;AACA,OAAOC,UAAP,MAAuB,mCAAvB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,cAAP,MAA2B,sDAA3B;AACA,SAASC,yBAAT,EAAoCC,8BAApC,EAAoEC,uBAApE,QAAmG,4BAAnG;AACA,SAASC,UAAT,QAA2B,0CAA3B;AACA,OAAOC,CAAP,MAAe,QAAf;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AAAA,MAC1BC,KAD0B,GACFD,KADE,CAC1BC,KAD0B;AAAA,MACnBC,MADmB,GACFF,KADE,CACnBE,MADmB;AAAA,MACXC,IADW,GACFH,KADE,CACXG,IADW;;AAAA,kBAECxB,QAAQ,EAFT;AAAA;AAAA,MAE1ByB,SAF0B;AAAA,MAEfC,YAFe;;AAAA,mBAGD1B,QAAQ,EAHP;AAAA;AAAA,MAG1B2B,QAH0B;AAAA,MAGhBC,WAHgB;;AAAA,mBAIH5B,QAAQ,EAJL;AAAA;AAAA,MAI1B6B,OAJ0B;AAAA,MAIjBC,UAJiB;;AAAA,mBAKC9B,QAAQ,EALT;AAAA;AAAA,MAK1B+B,SAL0B;AAAA,MAKfC,YALe;;AAAA,mBAMLhC,QAAQ,CAAC,EAAD,CANH;AAAA;AAAA,MAM1BiC,MAN0B;AAAA,MAMlBC,SANkB;;AAAA,oBAOTlC,QAAQ,CAAC,KAAD,CAPC;AAAA;AAAA,MAO1BmC,IAP0B;AAAA,MAOpBC,OAPoB;;AAAA,oBAQDpC,QAAQ,CAAC,KAAD,CARP;AAAA;AAAA,MAQ1BqC,QAR0B;AAAA,MAQhBC,WARgB;;AASjC,MAAMC,QAAQ,GAAG3B,WAAW,EAA5B;;AAEA,MAAM4B,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzBD,IAAAA,QAAQ,CAACxB,yBAAyB,CAACY,QAAD,EAAWI,SAAX,CAA1B,CAAR;AACD,GAFD;;AAGA,MAAMU,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAIC,OAAO,GAAGjC,MAAM,WAAIe,IAAI,CAACmB,IAAT,cAAiBlB,SAAjB,GAA8Bf,IAAI,CAACkC,YAAnC,CAAN,CAAuDC,EAArE;;AACA,QAAIC,KAAK,GAAGrC,MAAM,WAAIe,IAAI,CAACmB,IAAT,cAAiBd,OAAjB,GAA4BnB,IAAI,CAACkC,YAAjC,CAAN,CAAqDC,EAAjE;;AACA,QAAIE,WAAW,GAAGtC,MAAM,WAAIe,IAAI,CAACmB,IAAT,cAAiBnB,IAAI,CAACwB,QAAtB,GAAkCtC,IAAI,CAACkC,YAAvC,CAAN,CAA2DC,EAA7E;;AACA,QAAII,SAAS,GAAGxC,MAAM,WAAIe,IAAI,CAACmB,IAAT,cAAiBnB,IAAI,CAAC0B,MAAtB,GAAgCxC,IAAI,CAACkC,YAArC,CAAN,CAAyDC,EAAzE;;AACAN,IAAAA,QAAQ,CAACvB,8BAA8B,CAACQ,IAAI,CAACmB,IAAN,EAAYlB,SAAS,GAAGiB,OAAH,GAAclB,IAAI,CAACwB,QAAL,IAAiBD,WAApD,EAAkElB,OAAO,GAAGiB,KAAH,GAAYtB,IAAI,CAAC0B,MAAL,IAAeD,SAApG,EAA+GtB,QAAQ,GAAGA,QAAH,GAAcH,IAAI,CAAC2B,SAA1I,EAAoJpB,SAAS,GAAGA,SAAH,GAAeP,IAAI,CAAC4B,UAAjL,EAA6LnB,MAA7L,CAA/B,CAAR;AACD,GAND;;AAOA,MAAMoB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,QAAG5B,SAAS,KAAK6B,SAAd,IAA2BzB,OAAO,KAAKyB,SAAvC,IAAoD9B,IAAI,CAACmB,IAAL,KAAclC,MAAM,GAAG8C,MAAT,CAAgB7C,IAAI,CAAC8C,QAArB,CAArE,EAAsG;AACpGf,MAAAA,WAAW;AACXL,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAqB,MAAAA,YAAY;AACb,KAJD,MAKK;AACHjB,MAAAA,YAAY;AACZJ,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAqB,MAAAA,YAAY;AACb;AACF,GAXD;;AAYA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,QAAGjC,SAAS,KAAK6B,SAAd,IAA2BzB,OAAO,KAAKyB,SAAvC,IAAoD3B,QAAQ,KAAK2B,SAAjE,IAA8EvB,SAAS,KAAKuB,SAA/F,EAAyG;AACvGpC,MAAAA,UAAU,CAAC,iBAAD,CAAV;AACD,KAFD,MAGK,IAAG,CAACiB,IAAI,IAAIX,IAAI,CAACmB,IAAL,KAAclC,MAAM,GAAG8C,MAAT,CAAgB7C,IAAI,CAAC8C,QAArB,CAAvB,KAA2DvB,MAAM,KAAK,EAAzE,EAA4E;AAC/EK,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KAFI,MAGA,IAAIX,QAAQ,IAAI,CAACA,QAAQ,CAACgC,KAAT,CAAe,WAAf,CAAd,IAA+C5B,SAAS,IAAI,CAACA,SAAS,CAAC4B,KAAV,CAAgB,WAAhB,CAA7D,IAA+F1B,MAAM,IAAI,CAACA,MAAM,CAAC0B,KAAP,CAAa,WAAb,CAA7G,EAAyI;AAC5IzC,MAAAA,UAAU,CAAC,UAAD,CAAV;AACD,KAFI,MAGA;AACHmC,MAAAA,SAAS;AACV;AACF,GAbD;;AAcA,MAAMI,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB/B,IAAAA,YAAY;AACZI,IAAAA,UAAU;AACVF,IAAAA,WAAW;AACXI,IAAAA,YAAY;AACZE,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,IAAAA,OAAO,CAAC,KAAD,CAAP;AACAE,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAf,IAAAA,MAAM;AACP,GATD;;AAUA,MAAMqC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvBxB,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD,GAFD;;AAIA,sBACE,oBAAC,KAAD;AAAO,IAAA,MAAM,EAAEd,KAAf;AAAsB,IAAA,MAAM,EAAEC,MAA9B;AAAsC,IAAA,cAAc,EAAC,wBAArD;AAA8E,IAAA,QAAQ,EAAE,KAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,MAAM,EAAE;AAAA,aAAMkC,YAAY,EAAlB;AAAA,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,EAIGjC,IAAI,iBAAI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACP;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAACmB,IADR,CAFF,CADO,eAOP;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPO,eAQP;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAEnB,IAAI,CAACwB,QAAL,IAAiBxB,IAAI,CAACwB,QAA5C;AAAsD,IAAA,OAAO,EAAE,iBAAAa,CAAC,EAAI;AAACnC,MAAAA,YAAY,CAACjB,MAAM,CAACoD,CAAC,CAACC,EAAH,CAAN,CAAaP,MAAb,CAAoB7C,IAAI,CAACqD,EAAzB,CAAD,CAAZ;AAA4CH,MAAAA,UAAU;AAAI,KAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CARO,eAcP;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdO,eAeP;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,GAAG,EAAEpC,IAAI,CAAC2B,SAAjC;AAA4C,IAAA,YAAY,EAAE3B,IAAI,CAAC2B,SAAL,IAAkB3B,IAAI,CAAC2B,SAAjF;AAA4F,IAAA,QAAQ,EAAE,kBAAAU,CAAC;AAAA,aAAIjC,WAAW,CAACiC,CAAC,CAACG,MAAF,CAASC,KAAV,CAAf;AAAA,KAAvG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGKtC,QAAQ,IAAI,CAACA,QAAQ,CAACgC,KAAT,CAAe,WAAf,CAAd,iBAA8C;AAAK,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,QAAQ,EAAE;AAA1B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAHlD,CAFF,CAfO,eAwBP;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBO,eAyBP;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAE3C,IAAI,CAAC0B,MAAL,GAAc1B,IAAI,CAAC0B,MAAnB,GAA4B,OAAlD;AAA2D,IAAA,OAAO,EAAE,iBAAAW,CAAC,EAAI;AAAC/B,MAAAA,UAAU,CAACrB,MAAM,CAACoD,CAAC,CAACC,EAAH,CAAN,CAAaP,MAAb,CAAoB7C,IAAI,CAACqD,EAAzB,CAAD,CAAV;AAA0CH,MAAAA,UAAU;AAAG,KAAjI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CAzBO,eA+BP;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA/BO,eAgCP;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,eAEE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,GAAG,EAAEpC,IAAI,CAAC4B,UAAjC;AAA6C,IAAA,YAAY,EAAE5B,IAAI,CAAC4B,UAAL,IAAmB5B,IAAI,CAAC4B,UAAnF;AAA+F,IAAA,QAAQ,EAAE,kBAAAS,CAAC;AAAA,aAAI7B,YAAY,CAAC6B,CAAC,CAACG,MAAF,CAASC,KAAV,CAAhB;AAAA,KAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGKlC,SAAS,IAAI,CAACA,SAAS,CAAC4B,KAAV,CAAgB,WAAhB,CAAf,iBAAgD;AAAK,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,QAAQ,EAAE;AAA1B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAHpD,CAFF,CAhCO,eAyCP;AAAI,IAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzCO,EA0CN,CAAChC,IAAI,IAAIX,IAAI,CAACmB,IAAL,KAAclC,MAAM,GAAG8C,MAAT,CAAgB7C,IAAI,CAAC8C,QAArB,CAAvB,kBAA4D;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACzD;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADyD,eAEzD;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,QAAQ,EAAE,kBAAAK,CAAC,EAAI;AAAC3B,MAAAA,SAAS,CAAC2B,CAAC,CAACG,MAAF,CAASC,KAAV,CAAT;AAA2B3B,MAAAA,WAAW,CAAC,KAAD,CAAX;AAAmB,KAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAGID,QAAQ,iBAAI;AAAK,IAAA,KAAK,EAAE;AAAE6B,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,QAAQ,EAAE;AAA1B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAHhB,EAMKlC,MAAM,IAAI,CAACA,MAAM,CAAC0B,KAAP,CAAa,WAAb,CAAZ,iBAA0C;AAAK,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,QAAQ,EAAE;AAA1B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAN9C,CAFyD,CA1CtD,CAJX,eA4DE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAwB,IAAA,OAAO,EAAE;AAAA,aAAMT,WAAW,EAAjB;AAAA,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,WAAd;AAA0B,IAAA,OAAO,EAAED,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,CA5DF,CADF;AAuED,CApID;;AAqIA,eAAerC,eAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, Input, Fade } from 'reactstrap';\nimport moment from 'moment';\nimport Time from '../../../../commons/const/Time';\nimport DatePicker from '../../../helpers/singleDatePicker';\nimport { useDispatch, useSelector } from 'react-redux';\nimport TimePickerTime from '../../../../commons/components/TimePicker/timePicker';\nimport { editReasonCheckinCheckout, requestEditTimeCheckinCheckout, getDetailTimesheetStaff } from '../../../actions/timeSheet';\nimport { toastError } from '../../../../commons/helpers/toastHelpers';\nimport _ from  'lodash';\n\nconst EditReasonModal = (props) => {\n  const {modal, toggle, data } = props;\n  const [startTime, setStartTime] = useState();\n  const [reasonIn, setReasonIn] = useState();\n  const [endTime, setEndTime] = useState();\n  const [reasonOut, setReasonOut] = useState();\n  const [reason, setReason] = useState('');\n  const [fade, setFade] = useState(false);\n  const [required, setRequired] = useState(false);\n  const dispatch = useDispatch();\n\n  const updateReason = () => {\n    dispatch(editReasonCheckinCheckout(reasonIn, reasonOut));\n  }\n  const requestEdit = () => {\n    let startAt = moment(`${data.date} ${startTime}`, Time.FullDayFirst)._i;\n    let endAt = moment(`${data.date} ${endTime}`, Time.FullDayFirst)._i;\n    let startOrigin = moment(`${data.date} ${data.start_at}`, Time.FullDayFirst)._i;\n    let endOrigin = moment(`${data.date} ${data.end_at}`, Time.FullDayFirst)._i;\n    dispatch(requestEditTimeCheckinCheckout(data.date, startTime ? startAt : (data.start_at && startOrigin), endTime ? endAt : (data.end_at && endOrigin),reasonIn ? reasonIn : data.reason_in,reasonOut ? reasonOut : data.reason_out, reason))\n  }\n  const handClick = () => {\n    if(startTime !== undefined || endTime !== undefined || data.date !== moment().format(Time.crossDMY) ) {\n      requestEdit();\n      setFade(false);\n      handleToggle();\n    }\n    else {\n      updateReason();\n      setFade(false);\n      handleToggle();\n    }\n  }\n  const handleClick = () => {\n    if(startTime === undefined && endTime === undefined && reasonIn === undefined && reasonOut === undefined){\n      toastError('Nothing change!');\n    }\n    else if((fade || data.date !== moment().format(Time.crossDMY) ) && reason === ''){\n      setRequired(true)\n    }\n    else if((reasonIn && !reasonIn.match(/[a-zA-Z]+/)) || (reasonOut && !reasonOut.match(/[a-zA-Z]+/)) || (reason && !reason.match(/[a-zA-Z]+/)) ){\n      toastError('Invalid!')\n    }\n    else {\n      handClick()\n    }\n  }\n  const handleToggle = () => {\n    setStartTime();\n    setEndTime();\n    setReasonIn();\n    setReasonOut();\n    setReason('')\n    setFade(false);\n    setRequired(false)\n    toggle();\n  }\n  const handleShow = () => {\n    setFade(true);\n  }\n\n  return(\n    <Modal isOpen={modal} toggle={toggle} modalClassName=\"modal-background-color\" backdrop={false} >\n      <ModalHeader toggle={() => handleToggle()}>\n        Edit reason checkin checkout\n      </ModalHeader>\n      {data && <ModalBody>\n        <div className=\"row\">\n          <div className=\"col-4\">Date</div>\n          <div className=\"col-8\">\n            {data.date}\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\">Checkin</div>\n          <div className=\"col-8\">\n            <TimePickerTime time={data.start_at && data.start_at} setTime={e => {setStartTime(moment(e._d).format(Time.HM)); handleShow() }} />\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\">Reason checkin late</div>\n          <div className=\"col-8\">\n            <Input type=\"textarea\" key={data.reason_in} defaultValue={data.reason_in && data.reason_in} onChange={e => setReasonIn(e.target.value)}/>\n            {\n              (reasonIn && !reasonIn.match(/[a-zA-Z]+/)) && <div style={{ color: 'red', fontSize: '80%' }}>Invalid reason in late!</div>\n            }\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\">\n          <div className=\"col-4\">Checkout</div>\n          <div className=\"col-8\">\n            <TimePickerTime time={data.end_at ? data.end_at : '00:00'} setTime={e => {setEndTime(moment(e._d).format(Time.HM)); handleShow()}} />\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        <div className=\"row\" >\n          <div className=\"col-4\" >Reason checkout early</div>\n          <div className=\"col-8\" >\n            <Input type=\"textarea\" key={data.reason_out} defaultValue={data.reason_out && data.reason_out} onChange={e => setReasonOut(e.target.value)} />\n            {\n              (reasonOut && !reasonOut.match(/[a-zA-Z]+/)) && <div style={{ color: 'red', fontSize: '80%' }}>Invalid reason leave early!</div>\n            }\n          </div>\n        </div>\n        <hr className=\"hr-footer\" ></hr>\n        {(fade || data.date !== moment().format(Time.crossDMY) ) &&  <div className=\"row\">\n            <div className=\"col-4\" >Reason request edit time checkin, checkout</div>\n            <div className=\"col-8\">\n              <Input type=\"textarea\" onChange={e => {setReason(e.target.value); setRequired(false)}} />\n              {\n                required && <div style={{ color: 'red', fontSize: '80%' }}>Reason is a required field!</div>\n              }\n              {\n                (reason && !reason.match(/[a-zA-Z]+/)) && <div style={{ color: 'red', fontSize: '80%' }}>Invalid reason!</div>\n              }\n            </div>\n          </div>\n        }\n      </ModalBody>}\n      <ModalFooter>\n        <Button color=\"success\" onClick={() => handleClick()}>\n          Submit\n        </Button>\n        <Button color=\"secondary\" onClick={handleToggle}>\n          Cancel\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n}\nexport default EditReasonModal;"]},"metadata":{},"sourceType":"module"}