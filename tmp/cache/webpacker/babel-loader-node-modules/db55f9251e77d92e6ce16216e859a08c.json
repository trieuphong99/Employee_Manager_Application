{"ast":null,"code":"var _jsxFileName = \"/home/phong/rails/imp/app/javascript/admin/components/report/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport { Label, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport '../../../commons/components/report/build/ckeditor';\nimport _ from 'lodash';\nimport { getReport } from '../../actions/report';\nimport { styles } from './styles';\nimport { editorConfig } from './config';\nimport Images from './Images';\n\nvar filterMention = function filterMention(report_message, users) {\n  _.map(users, function (user) {\n    return report_message = _.replace(report_message, new RegExp(user.user_id, \"g\"), user.user_name);\n  });\n\n  return report_message;\n};\n\nexport default function (props) {\n  var _this = this;\n\n  // report_id\n  var date = props.date,\n      report_id = props.report_id;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modal = _useState2[0],\n      setModal = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setData = _useState4[1];\n\n  useEffect(function () {\n    if (modal) getReport(report_id, setData);\n  }, [modal]);\n\n  var toggle = function toggle() {\n    return setModal(!modal);\n  };\n\n  return !_.isEqual(data, {}) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    color: \"success\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, \"Report\"), /*#__PURE__*/React.createElement(Modal, {\n    size: \"lg\",\n    isOpen: modal,\n    toggle: toggle,\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, \"Daily Report\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.titleLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 15\n    }\n  }, \"Date:\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: styles.span,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 15\n    }\n  }, date)), /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.titleLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }, \"Send from:\"), /*#__PURE__*/React.createElement(\"span\", {\n    style: _objectSpread(_objectSpread({}, styles.mention), styles.span),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, data.send_from)), /*#__PURE__*/React.createElement(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.titleLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, \"Send to:\"), _.map(data.send_to, function (o) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n      style: _objectSpread(_objectSpread({}, styles.mention), styles.span),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, o.channel_name), ' ');\n  }))), /*#__PURE__*/React.createElement(Label, {\n    style: styles.titleLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, \"Content:\"), /*#__PURE__*/React.createElement(CKEditor, {\n    disabled: true,\n    editor: ClassicEditor,\n    data: filterMention(data.report_message, data.users),\n    config: editorConfig,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    style: styles.titleLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, \"Image:\"), /*#__PURE__*/React.createElement(Images, {\n    images: data.attachments,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Cancel\"))));\n}","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/components/report/index.js"],"names":["React","useState","useEffect","CKEditor","Label","Button","Modal","ModalHeader","ModalBody","ModalFooter","_","getReport","styles","editorConfig","Images","filterMention","report_message","users","map","user","replace","RegExp","user_id","user_name","props","date","report_id","modal","setModal","data","setData","toggle","isEqual","container","label","titleLabel","span","mention","send_from","send_to","o","channel_name","ClassicEditor","attachments"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport CKEditor from '@ckeditor/ckeditor5-react';\nimport { Label, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport '../../../commons/components/report/build/ckeditor'\nimport _ from 'lodash';\n\nimport { getReport } from '../../actions/report';\nimport { styles } from './styles';\nimport { editorConfig } from './config';\nimport Images from './Images';\n\nconst filterMention = (report_message, users) => {\n  _.map(users,\n    user =>\n      report_message = _.replace(report_message, new RegExp(user.user_id, \"g\"), user.user_name)\n  )\n  return report_message\n}\n\nexport default function (props) {\n  // report_id\n  const { date, report_id } = props\n  const [modal, setModal] = useState(false);\n  const [data, setData] = useState({})\n\n  useEffect(() => {\n    if(modal) getReport(report_id, setData)\n  }, [modal])\n\n  const toggle = () => setModal(!modal);\n  \n  return (\n    !_.isEqual(data, {}) &&\n    <>\n      <Button color=\"success\" onClick={toggle}>Report</Button>\n      <Modal size=\"lg\" isOpen={modal} toggle={toggle} style={styles.container}>\n        <ModalHeader toggle={toggle}>Daily Report</ModalHeader>\n        <ModalBody>\n          <div style={styles.label}>\n            <Label>\n              <div style={styles.titleLabel}>Date:</div>\n              <span style={styles.span}>{date}</span>\n            </Label>\n            <Label>\n              <div style={styles.titleLabel}>Send from:</div>\n              <span style={{ ...styles.mention, ...styles.span }}>{data.send_from}</span>\n            </Label>\n            <Label>\n              <div style={styles.titleLabel}>Send to:</div>\n              {_.map(data.send_to, o => <>\n                <span style={{ ...styles.mention, ...styles.span }}>{o.channel_name}</span>{' '}\n              </>\n              )}\n            </Label>\n          </div>\n          <Label style={styles.titleLabel}>Content:</Label>\n          <CKEditor\n            disabled={true}\n            editor={ClassicEditor}\n            data={filterMention(data.report_message, data.users)}\n            config={editorConfig}\n          />\n          <Label style={styles.titleLabel}>Image:</Label>\n          <Images images={data.attachments} />\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>Cancel</Button>\n        </ModalFooter>\n      </Modal>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}