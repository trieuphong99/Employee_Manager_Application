{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/phong/rails/imp/app/javascript/admin/components/dashboard/pieChart.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from \"react\";\nimport Chart from \"react-apexcharts\";\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from \"reactstrap\";\nimport DateRangePicker from \"../dateRangePicker\";\nimport { FaCheck, FaAngleDown, FaAngleUp } from \"react-icons/fa\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Time from \"../../../commons/const/Time\";\nimport _ from \"lodash\";\nimport { getDataPieChart } from \"../../actions/dashBoard\";\n\nvar PieChart = function PieChart(props) {\n  var reduxStartDate = useSelector(function (state) {\n    return state.dateRange.startDate.format(Time.crossDMY);\n  });\n  var reduxEndDate = useSelector(function (state) {\n    return state.dateRange.endDate.format(Time.crossDMY);\n  });\n\n  var _useState = useState([{\n    type: \"In late\",\n    isActive: true\n  }, {\n    type: \"Leave early\",\n    isActive: true\n  }, {\n    type: \"Full dayoff\",\n    isActive: true\n  }, {\n    type: \"Half dayoff\",\n    isActive: true\n  }]),\n      _useState2 = _slicedToArray(_useState, 2),\n      item = _useState2[0],\n      setItem = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isOpen = _useState4[0],\n      setOpen = _useState4[1];\n\n  var snakeString = _.join(_.map(item, function (e) {\n    return _.snakeCase(e.type);\n  }), \",\");\n\n  var labelsPie = _.filter(item, function (o) {\n    return o.isActive;\n  });\n\n  var _useState5 = useState(snakeString),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectString = _useState6[0],\n      setSelect = _useState6[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(getDataPieChart(reduxStartDate, reduxEndDate, selectString));\n  }, [reduxStartDate, reduxEndDate, selectString]);\n  var dataPie = useSelector(function (state) {\n    return state.getDataDashBoard.dataPie;\n  });\n\n  var toggle = function toggle() {\n    setOpen(!isOpen);\n\n    var filterItem = _.filter(item, function (o) {\n      return o.isActive;\n    });\n\n    setSelect(_.join(_.map(filterItem, function (e) {\n      return _.snakeCase(e.type);\n    }), \",\"));\n  };\n\n  var checkTick = function checkTick(i, index) {\n    setItem([].concat(_toConsumableArray(_.slice(item, 0, index)), [_objectSpread({}, i, {\n      isActive: !i.isActive\n    })], _toConsumableArray(_.slice(item, index + 1))));\n  };\n\n  var series = _.map(dataPie, function (o) {\n    return o.y;\n  });\n\n  var options = {\n    chart: {\n      type: \"donut\",\n      offsetX: 30,\n      offsetY: 50\n    },\n    labels: _.map(labelsPie, function (e) {\n      return e.type;\n    }),\n    responsive: [{\n      breakpoint: 1899,\n      options: {\n        chart: {\n          width: 550\n        },\n        legend: {\n          show: true,\n          fontSize: '18px',\n          offsetY: 120\n        }\n      }\n    }],\n    legend: {\n      show: true,\n      fontSize: '24px',\n      offsetY: 200\n    },\n    dataLabels: {\n      enable: true,\n      style: {\n        fontSize: '18px'\n      },\n      background: {\n        enable: true,\n        foreColor: '#343a40',\n        dropShadow: {\n          enable: false\n        }\n      }\n    },\n    tooltip: {\n      enable: true,\n      style: {\n        fontSize: '18px'\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row includes\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DateRangePicker, {\n    blockRange: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ButtonDropdown, {\n    isOpen: isOpen,\n    toggle: toggle,\n    className: \"button-dropdown\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DropdownToggle, {\n    color: \"light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, isOpen ? /*#__PURE__*/React.createElement(FaAngleUp, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(FaAngleDown, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(DropdownMenu, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, _.map(item, function (i, index) {\n    return /*#__PURE__*/React.createElement(DropdownItem, {\n      toggle: false,\n      key: index,\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: function onClick() {\n        return checkTick(i, index);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-8\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }\n    }, i.type), i.isActive && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaCheck, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 27\n      }\n    }))));\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"piechart-frame\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Chart, {\n    options: options,\n    series: series,\n    type: \"donut\",\n    width: 800,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default PieChart;","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/components/dashboard/pieChart.js"],"names":["React","useEffect","useState","Chart","ButtonDropdown","DropdownToggle","DropdownMenu","DropdownItem","DateRangePicker","FaCheck","FaAngleDown","FaAngleUp","useDispatch","useSelector","Time","_","getDataPieChart","PieChart","props","reduxStartDate","state","dateRange","startDate","format","crossDMY","reduxEndDate","endDate","type","isActive","item","setItem","isOpen","setOpen","snakeString","join","map","e","snakeCase","labelsPie","filter","o","selectString","setSelect","dispatch","dataPie","getDataDashBoard","toggle","filterItem","checkTick","i","index","slice","series","y","options","chart","offsetX","offsetY","labels","responsive","breakpoint","width","legend","show","fontSize","dataLabels","enable","style","background","foreColor","dropShadow","tooltip","cursor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SACEC,cADF,EAEEC,cAFF,EAGEC,YAHF,EAIEC,YAJF,QAKO,YALP;AAMA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,SAASC,OAAT,EAAkBC,WAAlB,EAA+BC,SAA/B,QAAgD,gBAAhD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,IAAP,MAAiB,6BAAjB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,eAAT,QAAgC,yBAAhC;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD,EAAW;AAC1B,MAAMC,cAAc,GAAGN,WAAW,CAAC,UAACO,KAAD;AAAA,WACjCA,KAAK,CAACC,SAAN,CAAgBC,SAAhB,CAA0BC,MAA1B,CAAiCT,IAAI,CAACU,QAAtC,CADiC;AAAA,GAAD,CAAlC;AAGA,MAAMC,YAAY,GAAGZ,WAAW,CAAC,UAACO,KAAD;AAAA,WAC/BA,KAAK,CAACC,SAAN,CAAgBK,OAAhB,CAAwBH,MAAxB,CAA+BT,IAAI,CAACU,QAApC,CAD+B;AAAA,GAAD,CAAhC;;AAJ0B,kBAOFtB,QAAQ,CAAC,CAC/B;AAAEyB,IAAAA,IAAI,EAAE,SAAR;AAAmBC,IAAAA,QAAQ,EAAE;AAA7B,GAD+B,EAE/B;AAAED,IAAAA,IAAI,EAAE,aAAR;AAAuBC,IAAAA,QAAQ,EAAE;AAAjC,GAF+B,EAG/B;AAAED,IAAAA,IAAI,EAAE,aAAR;AAAuBC,IAAAA,QAAQ,EAAE;AAAjC,GAH+B,EAI/B;AAAED,IAAAA,IAAI,EAAE,aAAR;AAAuBC,IAAAA,QAAQ,EAAE;AAAjC,GAJ+B,CAAD,CAPN;AAAA;AAAA,MAOnBC,IAPmB;AAAA,MAObC,OAPa;;AAAA,mBAaA5B,QAAQ,CAAC,KAAD,CAbR;AAAA;AAAA,MAanB6B,MAbmB;AAAA,MAaXC,OAbW;;AAc1B,MAAMC,WAAW,GAAGlB,CAAC,CAACmB,IAAF,CAClBnB,CAAC,CAACoB,GAAF,CAAMN,IAAN,EAAY,UAACO,CAAD;AAAA,WAAOrB,CAAC,CAACsB,SAAF,CAAYD,CAAC,CAACT,IAAd,CAAP;AAAA,GAAZ,CADkB,EAElB,GAFkB,CAApB;;AAIA,MAAMW,SAAS,GAAGvB,CAAC,CAACwB,MAAF,CAASV,IAAT,EAAe,UAACW,CAAD;AAAA,WAAOA,CAAC,CAACZ,QAAT;AAAA,GAAf,CAAlB;;AAlB0B,mBAmBQ1B,QAAQ,CAAC+B,WAAD,CAnBhB;AAAA;AAAA,MAmBnBQ,YAnBmB;AAAA,MAmBLC,SAnBK;;AAoB1B,MAAMC,QAAQ,GAAG/B,WAAW,EAA5B;AACAX,EAAAA,SAAS,CAAC,YAAM;AACd0C,IAAAA,QAAQ,CAAC3B,eAAe,CAACG,cAAD,EAAiBM,YAAjB,EAA+BgB,YAA/B,CAAhB,CAAR;AACD,GAFQ,EAEN,CAACtB,cAAD,EAAiBM,YAAjB,EAA+BgB,YAA/B,CAFM,CAAT;AAGA,MAAMG,OAAO,GAAG/B,WAAW,CAAC,UAACO,KAAD;AAAA,WAAWA,KAAK,CAACyB,gBAAN,CAAuBD,OAAlC;AAAA,GAAD,CAA3B;;AACA,MAAME,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBd,IAAAA,OAAO,CAAC,CAACD,MAAF,CAAP;;AACA,QAAIgB,UAAU,GAAGhC,CAAC,CAACwB,MAAF,CAASV,IAAT,EAAe,UAACW,CAAD;AAAA,aAAOA,CAAC,CAACZ,QAAT;AAAA,KAAf,CAAjB;;AACAc,IAAAA,SAAS,CACP3B,CAAC,CAACmB,IAAF,CACEnB,CAAC,CAACoB,GAAF,CAAMY,UAAN,EAAkB,UAACX,CAAD;AAAA,aAAOrB,CAAC,CAACsB,SAAF,CAAYD,CAAC,CAACT,IAAd,CAAP;AAAA,KAAlB,CADF,EAEE,GAFF,CADO,CAAT;AAMD,GATD;;AAUA,MAAMqB,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD,EAAIC,KAAJ,EAAc;AAC9BpB,IAAAA,OAAO,8BACFf,CAAC,CAACoC,KAAF,CAAQtB,IAAR,EAAc,CAAd,EAAiBqB,KAAjB,CADE,sBAEAD,CAFA;AAEGrB,MAAAA,QAAQ,EAAE,CAACqB,CAAC,CAACrB;AAFhB,4BAGFb,CAAC,CAACoC,KAAF,CAAQtB,IAAR,EAAcqB,KAAK,GAAG,CAAtB,CAHE,GAAP;AAKD,GAND;;AAOA,MAAME,MAAM,GAAGrC,CAAC,CAACoB,GAAF,CAAMS,OAAN,EAAe,UAACJ,CAAD;AAAA,WAAOA,CAAC,CAACa,CAAT;AAAA,GAAf,CAAf;;AACA,MAAMC,OAAO,GAAG;AACdC,IAAAA,KAAK,EAAE;AACL5B,MAAAA,IAAI,EAAE,OADD;AAEL6B,MAAAA,OAAO,EAAE,EAFJ;AAGLC,MAAAA,OAAO,EAAE;AAHJ,KADO;AAMdC,IAAAA,MAAM,EAAE3C,CAAC,CAACoB,GAAF,CAAMG,SAAN,EAAiB,UAACF,CAAD;AAAA,aAAOA,CAAC,CAACT,IAAT;AAAA,KAAjB,CANM;AAOdgC,IAAAA,UAAU,EAAE,CACV;AACEC,MAAAA,UAAU,EAAE,IADd;AAEEN,MAAAA,OAAO,EAAE;AACPC,QAAAA,KAAK,EAAE;AACLM,UAAAA,KAAK,EAAE;AADF,SADA;AAIPC,QAAAA,MAAM,EAAE;AACNC,UAAAA,IAAI,EAAE,IADA;AAENC,UAAAA,QAAQ,EAAE,MAFJ;AAGNP,UAAAA,OAAO,EAAE;AAHH;AAJD;AAFX,KADU,CAPE;AAsBdK,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,QAAQ,EAAE,MAFJ;AAGNP,MAAAA,OAAO,EAAE;AAHH,KAtBM;AA2BdQ,IAAAA,UAAU,EAAE;AACVC,MAAAA,MAAM,EAAE,IADE;AAEVC,MAAAA,KAAK,EAAE;AACLH,QAAAA,QAAQ,EAAE;AADL,OAFG;AAKVI,MAAAA,UAAU,EAAE;AACVF,QAAAA,MAAM,EAAE,IADE;AAEVG,QAAAA,SAAS,EAAE,SAFD;AAGVC,QAAAA,UAAU,EAAE;AACVJ,UAAAA,MAAM,EAAE;AADE;AAHF;AALF,KA3BE;AAwCdK,IAAAA,OAAO,EAAE;AACPL,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,KAAK,EAAE;AACLH,QAAAA,QAAQ,EAAE;AADL;AAFA;AAxCK,GAAhB;AA+CA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AAAiB,IAAA,UAAU,EAAC,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AACE,IAAA,MAAM,EAAEjC,MADV;AAEE,IAAA,MAAM,EAAEe,MAFV;AAGE,IAAA,SAAS,EAAC,iBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,cAAD;AACE,IAAA,KAAK,EAAC,OADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGf,MAAM,gBAAG,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,gBAAmB,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAH5B,CALF,eAUE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,CAAC,CAACoB,GAAF,CAAMN,IAAN,EAAY,UAACoB,CAAD,EAAIC,KAAJ,EAAc;AACzB,wBACE,oBAAC,YAAD;AACE,MAAA,MAAM,EAAE,KADV;AAEE,MAAA,GAAG,EAAEA,KAFP;AAGE,MAAA,KAAK,EAAE;AAAEsB,QAAAA,MAAM,EAAE;AAAV,OAHT;AAIE,MAAA,OAAO,EAAE;AAAA,eAAMxB,SAAS,CAACC,CAAD,EAAIC,KAAJ,CAAf;AAAA,OAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAME;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwBD,CAAC,CAACtB,IAA1B,CADF,EAEGsB,CAAC,CAACrB,QAAF,iBACC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAHJ,CANF,CADF;AAiBD,GAlBA,CADH,CAVF,CADF,CAJF,CADF,eAwCE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAE0B,OAAhB;AAAyB,IAAA,MAAM,EAAEF,MAAjC;AAAyC,IAAA,IAAI,EAAC,OAA9C;AAAsD,IAAA,KAAK,EAAE,GAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAxCF,CADF;AA8CD,CAxID;;AAyIA,eAAenC,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Chart from \"react-apexcharts\";\nimport {\n  ButtonDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport DateRangePicker from \"../dateRangePicker\";\nimport { FaCheck, FaAngleDown, FaAngleUp } from \"react-icons/fa\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Time from \"../../../commons/const/Time\";\nimport _ from \"lodash\";\nimport { getDataPieChart } from \"../../actions/dashBoard\";\n\nconst PieChart = (props) => {\n  const reduxStartDate = useSelector((state) =>\n    state.dateRange.startDate.format(Time.crossDMY)\n  );\n  const reduxEndDate = useSelector((state) =>\n    state.dateRange.endDate.format(Time.crossDMY)\n  );\n  const [item, setItem] = useState([\n    { type: \"In late\", isActive: true },\n    { type: \"Leave early\", isActive: true },\n    { type: \"Full dayoff\", isActive: true },\n    { type: \"Half dayoff\", isActive: true },\n  ]);\n  const [isOpen, setOpen] = useState(false);\n  const snakeString = _.join(\n    _.map(item, (e) => _.snakeCase(e.type)),\n    \",\"\n  );\n  const labelsPie = _.filter(item, (o) => o.isActive);\n  const [selectString, setSelect] = useState(snakeString);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getDataPieChart(reduxStartDate, reduxEndDate, selectString));\n  }, [reduxStartDate, reduxEndDate, selectString]);\n  const dataPie = useSelector((state) => state.getDataDashBoard.dataPie);\n  const toggle = () => {\n    setOpen(!isOpen);\n    let filterItem = _.filter(item, (o) => o.isActive);\n    setSelect(\n      _.join(\n        _.map(filterItem, (e) => _.snakeCase(e.type)),\n        \",\"\n      )\n    );\n  };\n  const checkTick = (i, index) => {\n    setItem([\n      ..._.slice(item, 0, index),\n      { ...i, isActive: !i.isActive },\n      ..._.slice(item, index + 1),\n    ]);\n  };\n  const series = _.map(dataPie, (o) => o.y);\n  const options = {\n    chart: {\n      type: \"donut\",\n      offsetX: 30,\n      offsetY: 50\n    },\n    labels: _.map(labelsPie, (e) => e.type),\n    responsive: [\n      {\n        breakpoint: 1899,\n        options: {\n          chart: {\n            width: 550,\n          },\n          legend: {\n            show: true,\n            fontSize: '18px',\n            offsetY: 120\n          }\n        },\n      },\n    ],\n    legend: {\n      show: true,\n      fontSize: '24px',\n      offsetY: 200\n    },\n    dataLabels: {\n      enable: true,\n      style: {\n        fontSize: '18px',\n      },\n      background: {\n        enable: true,\n        foreColor: '#343a40',\n        dropShadow: {\n          enable: false\n        }\n      }\n    },\n    tooltip: {\n      enable: true,\n      style: {\n        fontSize: '18px'\n      }\n    }\n  };\n  return (\n    <div>\n      <div className=\"row includes\">\n        <div className=\"col\">\n          <DateRangePicker blockRange=\"none\" />\n        </div>\n        <div className=\"col\">\n          <ButtonDropdown\n            isOpen={isOpen}\n            toggle={toggle}\n            className=\"button-dropdown\"\n          >\n            <DropdownToggle\n              color=\"light\"\n            >\n              {isOpen ? <FaAngleUp /> : <FaAngleDown />}\n            </DropdownToggle>\n            <DropdownMenu>\n              {_.map(item, (i, index) => {\n                return (\n                  <DropdownItem\n                    toggle={false}\n                    key={index}\n                    style={{ cursor: \"pointer\" }}\n                    onClick={() => checkTick(i, index)}\n                  >\n                    <div className=\"row\">\n                      <div className=\"col-8\">{i.type}</div>\n                      {i.isActive && (\n                        <div className=\"col-4\">\n                          <FaCheck />\n                        </div>\n                      )}\n                    </div>\n                  </DropdownItem>\n                );\n              })}\n            </DropdownMenu>\n          </ButtonDropdown>\n        </div>\n      </div>\n      <div className=\"piechart-frame\">\n        <Chart options={options} series={series} type=\"donut\" width={800} />\n      </div>\n    </div>\n  );\n};\nexport default PieChart;\n"]},"metadata":{},"sourceType":"module"}