{"ast":null,"code":"var _jsxFileName = \"/home/phong/rails/imp/app/javascript/admin/components/selection/dayOff/dayOff.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from \"react\";\nimport \"../selectionStyle.css\";\nimport { Link } from \"react-router-dom\";\nimport DatePicker from \"../../../../commons/components/dateRangePicker\";\nimport Table from \"reactstrap/lib/Table\";\nimport { getListAccountsDayOff, setIsAllowedDayOff } from \"../../../actions/dayOff\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport Time from \"../../../../commons/const/Time\";\nimport { Tooltip, Badge } from \"reactstrap\";\nimport Pagination from \"../../../../commons/components/pagination\";\nimport ConfirmModal from \"../../../../commons/components/modal/confirmModal\";\nimport SearchUser from \"../../../../commons/components/searchUser/searchUser\";\n\nvar DayOff = function DayOff() {\n  var _useState = useState({\n    startTime: moment().subtract(10, 'days').format(Time.DMY),\n    endTime: moment().format(Time.DMY)\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      request_date = _useState2[0],\n      _setDate = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      id = _useState4[0],\n      setID = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      current_page = _useState6[0],\n      setCurrentPage = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      idStaff = _useState8[0],\n      setIDStaff = _useState8[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(getListAccountsDayOff(request_date, idStaff, current_page));\n  }, [request_date, idStaff, current_page]);\n  var listDayOff = useSelector(function (state) {\n    return state.getListAccountsDayOff.data;\n  });\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      modal = _useState10[0],\n      setModal = _useState10[1];\n\n  var toggle = function toggle() {\n    return setModal(!modal);\n  };\n\n  var handleClick = function handleClick(item) {\n    dispatch(setIsAllowedDayOff(id, item));\n    setModal(!modal);\n    window.location.reload(false);\n  };\n\n  return React.createElement(\"main\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"breadcrumb-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"nav\", {\n    id: \"breadcrumb-body\",\n    \"aria-label\": \"breadcrumb\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"ol\", {\n    className: \"breadcrumb\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"breadcrumb-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Dashboard\")), React.createElement(\"li\", {\n    className: \"breadcrumb-item active\",\n    \"aria-current\": \"page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Day Off\"))))), React.createElement(\"div\", {\n    className: \"date-picker\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-sm-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(DatePicker, {\n    setDate: function setDate(data) {\n      return _setDate(data);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-sm-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(SearchUser, {\n    onSelectStaff: function onSelectStaff(d) {\n      return setIDStaff(d);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }))))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: \"table\",\n    hover: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Code\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Date\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Reason\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Status\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Confirm\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, _.map(listDayOff.data, function (item, i) {\n    return React.createElement(\"tr\", {\n      key: i++,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, item.code), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, item.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, item.email), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, item.request_date), item.reason.length > 8 ? React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(TooltipItem, {\n      item: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })) : React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, item.reason), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, item.status), React.createElement(\"td\", {\n      onClick: function onClick() {\n        return setID(item.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, item.confirmation_status === \"waiting\" ? React.createElement(ConfirmModal, {\n      isOpen: modal,\n      toggle: toggle,\n      item: listDayOff.data,\n      confirm: function confirm() {\n        return handleClick(\"confirm\");\n      },\n      refuse: function refuse() {\n        return handleClick(\"refuse\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }) : item.confirmation_status === \"confirm\" ? React.createElement(Badge, {\n      color: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Confirm\") : React.createElement(Badge, {\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Refuse\")));\n  })))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Pagination, {\n    totalPage: listDayOff.total_page,\n    pageChange: function pageChange(x) {\n      return setCurrentPage(x);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })));\n};\n\nexport default DayOff;\n\nvar TooltipItem = function TooltipItem(props) {\n  var item = props.item;\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isOpenTool = _useState12[0],\n      setIsOpen = _useState12[1];\n\n  var openTooltip = function openTooltip() {\n    return setIsOpen(!isOpenTool);\n  };\n\n  return React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    id: item.code,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, item.reason.substring(0, 8), \"...\"), React.createElement(Tooltip, {\n    style: {\n      backgroundColor: '#E0E0E0',\n      color: 'black'\n    },\n    placement: \"right\",\n    isOpen: isOpenTool,\n    target: item.code,\n    toggle: openTooltip,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, item.reason));\n};","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/components/selection/dayOff/dayOff.js"],"names":["React","useEffect","useState","Link","DatePicker","Table","getListAccountsDayOff","setIsAllowedDayOff","useDispatch","useSelector","_","moment","Time","Tooltip","Badge","Pagination","ConfirmModal","SearchUser","DayOff","startTime","subtract","format","DMY","endTime","request_date","setDate","id","setID","current_page","setCurrentPage","idStaff","setIDStaff","dispatch","listDayOff","state","data","modal","setModal","toggle","handleClick","item","window","location","reload","d","map","i","code","name","email","reason","length","status","confirmation_status","total_page","x","TooltipItem","props","isOpenTool","setIsOpen","openTooltip","substring","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"../selectionStyle.css\";\nimport { Link } from \"react-router-dom\";\nimport DatePicker from \"../../../../commons/components/dateRangePicker\";\nimport Table from \"reactstrap/lib/Table\";\nimport { getListAccountsDayOff, setIsAllowedDayOff } from \"../../../actions/dayOff\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport Time from \"../../../../commons/const/Time\";\nimport { Tooltip, Badge} from \"reactstrap\";\nimport Pagination from \"../../../../commons/components/pagination\";\nimport ConfirmModal from \"../../../../commons/components/modal/confirmModal\";\nimport SearchUser from \"../../../../commons/components/searchUser/searchUser\";\n\nconst DayOff = () => {\n  const [request_date, setDate] = useState({\n    startTime: moment().subtract(10, 'days').format(Time.DMY),\n    endTime: moment().format(Time.DMY)\n  })\n  const [id, setID] = useState(null);\n  const [current_page, setCurrentPage] = useState(1);\n  const [idStaff, setIDStaff] = useState();\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getListAccountsDayOff(request_date, idStaff, current_page));\n  }, [request_date, idStaff, current_page]);\n  \n  const listDayOff = useSelector(state => state.getListAccountsDayOff.data);\n  const [modal, setModal] = useState(false);\n  const toggle = () => setModal(!modal);\n  const handleClick = (item) => {\n    dispatch(setIsAllowedDayOff(id, item));\n    setModal(!modal);\n    window.location.reload(false);\n  }\n\n  return (\n    <main>\n      <div className=\"breadcrumb-wrapper\">\n        <div className=\"container-fluid\">\n          <nav id=\"breadcrumb-body\" aria-label=\"breadcrumb\">\n            <ol className=\"breadcrumb\">\n              <li className=\"breadcrumb-item\">\n                <Link to=\"/\">Dashboard</Link>\n              </li>\n              <li className=\"breadcrumb-item active\" aria-current=\"page\">\n                Day Off\n              </li>\n            </ol>\n          </nav>\n        </div>\n      </div>\n      <div className=\"date-picker\">\n      <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-sm-6\"><DatePicker setDate={data => setDate(data)} /></div>\n            <div className=\"col-sm-6\"><SearchUser onSelectStaff={d => setIDStaff(d)}/></div>\n          </div>\n        </div>\n      </div>\n      <div>\n        <Table className=\"table\" hover>\n          <thead>\n            <tr>\n              <td>Code</td>\n              <td>Name</td>\n              <td>Email</td>\n              <td>Date</td>\n              <td>Reason</td>\n              <td>Status</td>\n              <td>Confirm</td>\n            </tr>\n          </thead>\n          <tbody>\n            {_.map(listDayOff.data, (item, i) => {\n              return (\n                <tr key={i++}>\n                  <td>{item.code}</td>\n                  <td>{item.name}</td>\n                  <td>{item.email}</td>\n                  <td>{item.request_date}</td>\n                  {(item.reason.length > 8) ? \n                    <td>\n                      <TooltipItem item={item} />\n                    </td>\n                    :\n                    <td>{item.reason}</td>\n                  }\n                  <td>{item.status}</td>\n                  <td onClick={() => setID(item.id)}>\n                    {item.confirmation_status === \"waiting\" ? (\n                      <ConfirmModal\n                      isOpen={modal}\n                      toggle={toggle}\n                      item={listDayOff.data}\n                      confirm={() => handleClick(\"confirm\")}\n                      refuse={() => handleClick(\"refuse\")}\n                    />\n                    ) : (\n                      item.confirmation_status === \"confirm\" ? \n                      <Badge color=\"success\">Confirm</Badge>\n                      : \n                      <Badge color=\"danger\">Refuse</Badge>\n                    )}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n      </div>\n      <div>\n        <Pagination totalPage={listDayOff.total_page} pageChange={(x) => setCurrentPage(x)} />\n      </div>\n    </main>\n  );\n};\n\nexport default DayOff;\n\nconst TooltipItem = (props) => {\n  const {item} = props;\n  const [isOpenTool, setIsOpen] = useState(false);\n  const openTooltip = () => setIsOpen(!isOpenTool);\n  return (\n    <span>\n      <p id={item.code}>\n        {item.reason.substring(0,8)}...\n      </p>\n      <Tooltip style={{backgroundColor: '#E0E0E0', color: 'black'}} placement=\"right\" isOpen={isOpenTool} target={item.code} toggle={openTooltip}>\n        {item.reason}\n      </Tooltip>\n    </span>\n  )\n}"]},"metadata":{},"sourceType":"module"}