{"ast":null,"code":"var _jsxFileName = \"/home/phong/rails/imp/app/javascript/staff/components/overtimes/OvertimeForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Label, Row, Col, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { Field, Form, Formik, ErrorMessage } from \"formik\";\nimport * as Yup from 'yup';\nimport { ReactstrapInput } from \"reactstrap-formik\";\nimport * as overtimesActions from '../../actions/overtimes';\nimport SingleDatePicker from '../../helpers/singleDatePicker';\nimport Time from '../../../commons/const/Time';\nimport TimePickers from './TimePicker';\n\nvar isSameOrBefore = function isSameOrBefore(startTime, endTime) {\n  return moment(startTime, 'HH:mm').isSameOrBefore(moment(endTime, 'HH:mm'));\n};\n\nvar validationSchema = Yup.object().shape({\n  start_at: Yup.string().required(\"Start at is a required field\").test('not empty', 'Start time cant be empty', function (value) {\n    return !!value;\n  }).test(\"start_time_test\", \"Start time must be before end time\", function (value) {\n    var end_at = this.parent.end_at;\n    return isSameOrBefore(value, end_at);\n  }),\n  end_at: Yup.string().required(\"End time is a required field\"),\n  reason: Yup.string().max(200).matches(/[a-zA-Z]$/, 'Invalid reason!').required(\"Reason is a required field\")\n});\n\nfunction DayOffForm(props) {\n  var overtimesActions = props.overtimesActions,\n      buttonLabel = props.buttonLabel,\n      title = props.title,\n      item = props.item,\n      id = props.id;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modal = _useState2[0],\n      setModal = _useState2[1];\n\n  var _useState3 = useState(item ? moment(item.date, Time.crossDMY) : moment()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      date = _useState4[0],\n      setDate = _useState4[1];\n\n  var initialValues = item ? {\n    start_at: item.start_at,\n    end_at: item.end_at,\n    reason: item.reason\n  } : {\n    start_at: moment().format(Time.HM),\n    end_at: moment().add(3, 'hour').format(Time.HM),\n    reason: ''\n  };\n\n  var toggle = function toggle() {\n    return setModal(!modal);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Button, {\n    style: {\n      width: \"100px\"\n    },\n    color: \"info\",\n    onClick: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, buttonLabel), React.createElement(Modal, {\n    isOpen: modal,\n    toggle: toggle,\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Formik, {\n    initialValues: initialValues,\n    validationSchema: validationSchema,\n    onSubmit: function onSubmit(values) {\n      if (item === undefined) overtimesActions.addOvertimes(_objectSpread({}, values, {\n        date: date.format(Time.crossDMY)\n      }));else overtimesActions.updateOvertimes(id, _objectSpread({}, values, {\n        date: date.format(Time.crossDMY)\n      }));\n      toggle();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, function (_ref) {\n    var setFieldValue = _ref.setFieldValue,\n        values = _ref.values,\n        errors = _ref.errors;\n    return React.createElement(Form, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, title), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Label, {\n      \"for\": \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Date\"), React.createElement(SingleDatePicker, {\n      id: \"date\",\n      date: date,\n      onChange: function onChange(e) {\n        return setDate({\n          date: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Label, {\n      \"for\": \"start_at\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Start\"), React.createElement(TimePickers, {\n      id: \"start_at\",\n      name: \"start_at\",\n      defaultTime: values['start_at'],\n      onChange: function onChange(e) {\n        return setFieldValue('start_at', e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(ErrorMessage, {\n      name: \"start_at\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, function (msg) {\n      return React.createElement(\"div\", {\n        style: {\n          display: \"block\"\n        },\n        className: \"invalid-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, msg);\n    })), React.createElement(Col, {\n      xs: \"6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Label, {\n      \"for\": \"end_at\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"End\"), React.createElement(TimePickers, {\n      id: \"end_at\",\n      name: \"end_at\",\n      defaultTime: values['end_at'],\n      onChange: function onChange(e) {\n        return setFieldValue('end_at', e.target.value);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(ErrorMessage, {\n      name: \"end_at\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, function (msg) {\n      return React.createElement(\"div\", {\n        style: {\n          display: \"block\"\n        },\n        className: \"invalid-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, msg);\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"reason\",\n      label: \"Reason\",\n      type: \"textarea\",\n      component: ReactstrapInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })))), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      onClick: toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Cancel\"), ' ', React.createElement(Button, {\n      color: \"secondary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Submit\")));\n  })));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {};\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    overtimesActions: bindActionCreators(overtimesActions, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayOffForm);","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/staff/components/overtimes/OvertimeForm.js"],"names":["React","useState","connect","bindActionCreators","Label","Row","Col","Button","Modal","ModalHeader","ModalBody","ModalFooter","moment","Field","Form","Formik","ErrorMessage","Yup","ReactstrapInput","overtimesActions","SingleDatePicker","Time","TimePickers","isSameOrBefore","startTime","endTime","validationSchema","object","shape","start_at","string","required","test","value","end_at","parent","reason","max","matches","DayOffForm","props","buttonLabel","title","item","id","modal","setModal","date","crossDMY","setDate","initialValues","format","HM","add","toggle","width","values","undefined","addOvertimes","updateOvertimes","setFieldValue","errors","e","target","msg","display","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport { Label, Row, Col, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { Field, Form, Formik, ErrorMessage } from \"formik\";\nimport * as Yup from 'yup';\nimport { ReactstrapInput } from \"reactstrap-formik\";\n\nimport * as overtimesActions from '../../actions/overtimes'\nimport SingleDatePicker from '../../helpers/singleDatePicker'\nimport Time from '../../../commons/const/Time'\nimport TimePickers from './TimePicker';\n\nconst isSameOrBefore = (startTime, endTime) => {\n  return moment(startTime, 'HH:mm').isSameOrBefore(moment(endTime, 'HH:mm'));\n}\n\nconst validationSchema = Yup.object().shape({\n  start_at: Yup.string().required(\"Start at is a required field\")\n    .test(\n      'not empty',\n      'Start time cant be empty',\n      function (value) {\n        return !!value;\n      }\n    )\n    .test(\n      \"start_time_test\",\n      \"Start time must be before end time\",\n      function (value) {\n        const { end_at } = this.parent;\n        return isSameOrBefore(value, end_at);\n      }\n    ),\n  end_at: Yup.string().required(\"End time is a required field\"),\n  reason: Yup.string().max(200).matches(/[a-zA-Z]$/, 'Invalid reason!').required(\"Reason is a required field\")\n})\n\nfunction DayOffForm(props) {\n  const {\n    overtimesActions,\n    buttonLabel,\n    title,\n    item,\n    id\n  } = props\n\n  const [modal, setModal] = useState(false);\n  const [date, setDate] = useState(\n    item ? moment(item.date, Time.crossDMY)\n      : moment()\n  )\n  const initialValues =\n    item ? {\n      start_at: item.start_at,\n      end_at: item.end_at,\n      reason: item.reason\n    } : {\n        start_at: moment().format(Time.HM),\n        end_at: moment().add(3, 'hour').format(Time.HM),\n        reason: ''\n      }\n\n  const toggle = () => setModal(!modal);\n\n  return (\n    <div>\n      <Button style={{ width: \"100px\" }} color=\"info\" onClick={toggle}>{buttonLabel}</Button>\n      <Modal isOpen={modal} toggle={toggle} centered={true}>\n        <Formik\n          initialValues={initialValues}\n          validationSchema={validationSchema}\n          onSubmit={values => {\n            if (item === undefined) overtimesActions.addOvertimes({ ...values, date: date.format(Time.crossDMY) })\n            else overtimesActions.updateOvertimes(id, { ...values, date: date.format(Time.crossDMY) })\n            toggle()\n          }}\n        >\n          {({ setFieldValue, values, errors }) => (\n            <Form>\n              <ModalHeader toggle={toggle}>{title}</ModalHeader>\n              <ModalBody>\n                <Row>\n                  <Col xs=\"12\">\n                    <Label for=\"date\">Date</Label>\n                    <SingleDatePicker\n                      id=\"date\"\n                      date={date}\n                      onChange={e => setDate({ date: e.target.value })}\n                    />\n                  </Col>\n                </Row>\n                <Row>\n                  <Col xs=\"6\">\n                    <Label for=\"start_at\">Start</Label>\n                    <TimePickers\n                      id=\"start_at\"\n                      name={\"start_at\"}\n                      defaultTime={values['start_at']}\n                      onChange={e => setFieldValue('start_at', e.target.value)}\n                    />\n                    <ErrorMessage name=\"start_at\">{msg => <div style={{ display: \"block\" }} className=\"invalid-feedback\">{msg}</div>}</ErrorMessage>\n                  </Col>\n                  <Col xs=\"6\">\n                    <Label for=\"end_at\">End</Label>\n                    <TimePickers\n                      id=\"end_at\"\n                      name={\"end_at\"}\n                      defaultTime={values['end_at']}\n                      onChange={e => setFieldValue('end_at', e.target.value)}\n                    />\n                    <ErrorMessage name=\"end_at\">{msg => <div style={{ display: \"block\" }} className=\"invalid-feedback\">{msg}</div>}</ErrorMessage>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col xs=\"12\">\n                    <Field\n                      name=\"reason\"\n                      label=\"Reason\"\n                      type=\"textarea\"\n                      component={ReactstrapInput}\n                    />\n                  </Col>\n                </Row>\n\n              </ModalBody>\n              <ModalFooter>\n                <Button color=\"primary\" onClick={toggle}>Cancel</Button>{' '}\n                <Button color=\"secondary\" type=\"submit\">Submit</Button>\n              </ModalFooter>\n            </Form>\n          )}\n        </Formik>\n      </Modal>\n    </div >\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    overtimesActions: bindActionCreators(overtimesActions, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayOffForm);"]},"metadata":{},"sourceType":"module"}