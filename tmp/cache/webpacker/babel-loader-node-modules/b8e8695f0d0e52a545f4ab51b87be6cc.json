{"ast":null,"code":"var _jsxFileName = \"/home/phong/rails/imp/app/javascript/staff/components/dayOffs/DayOffForm.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Row, Col, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Field, Form, Formik } from \"formik\";\nimport * as Yup from 'yup';\nimport { ReactstrapInput, ReactstrapSelect } from \"reactstrap-formik\";\nimport * as dayOffActions from '../../actions/dayOffs';\nimport * as options from './selectOptions';\nimport Time from '../../../commons/const/Time';\nimport DatePicker from '../../../commons/components/dateRangePicker';\nimport moment from 'moment';\nvar validationSchema = Yup.object({\n  status: Yup.string().required(),\n  reason: Yup.string().max(200).matches(/[a-zA-Z]$/, 'Invalid reason!').required()\n});\n\nfunction DayOffForm(props) {\n  var dayOffActions = props.dayOffActions,\n      buttonLabel = props.buttonLabel,\n      title = props.title,\n      item = props.item;\n\n  var _useState = useState(item ? {\n    startTime: item.from_date,\n    endTime: item.to_date\n  } : {\n    startTime: moment(),\n    endTime: moment().add(1, 'day')\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modal = _useState4[0],\n      setModal = _useState4[1];\n\n  var initialValues = item ? {\n    status: item.status,\n    reason: item.reason\n  } : {\n    status: '',\n    reason: ''\n  };\n\n  var toggle = function toggle() {\n    return setModal(!modal);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(Button, {\n    style: {\n      width: \"100px\"\n    },\n    color: \"info\",\n    onClick: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, buttonLabel), React.createElement(Modal, {\n    isOpen: modal,\n    toggle: toggle,\n    centered: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(Formik, {\n    initialValues: initialValues,\n    validationSchema: validationSchema,\n    onSubmit: function onSubmit(values) {\n      var data = _objectSpread({}, values, {\n        from_date: moment(date.startTime, Time.DMY).format(Time.crossDMY),\n        to_date: moment(date.endTime, Time.DMY).format(Time.crossDMY),\n        request_date: moment().format(Time.crossDMY)\n      });\n\n      if (item === undefined) dayOffActions.addDayOffs(data);else dayOffActions.updateDayOffs(item.id, data);\n      toggle();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, function (_ref) {\n    var handleSubmit = _ref.handleSubmit,\n        isSubmitting = _ref.isSubmitting,\n        values = _ref.values,\n        errors = _ref.errors;\n    return React.createElement(Form, {\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, title), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(DatePicker, {\n      block: true,\n      setDate: setDate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Field, {\n      label: \"Status\",\n      name: \"status\",\n      component: ReactstrapSelect,\n      inputprops: {\n        name: \"status\",\n        id: \"status\",\n        options: options.status,\n        defaultOption: \"Select\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Field, {\n      label: \"Reason\",\n      name: \"reason\",\n      type: \"textarea\",\n      component: ReactstrapInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })))), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      onClick: toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Cancel\"), ' ', React.createElement(Button, {\n      color: \"secondary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Submit\")));\n  })));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {};\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    dayOffActions: bindActionCreators(dayOffActions, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayOffForm);","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/staff/components/dayOffs/DayOffForm.js"],"names":["React","useState","connect","bindActionCreators","Row","Col","Button","Modal","ModalHeader","ModalBody","ModalFooter","Field","Form","Formik","Yup","ReactstrapInput","ReactstrapSelect","dayOffActions","options","Time","DatePicker","moment","validationSchema","object","status","string","required","reason","max","matches","DayOffForm","props","buttonLabel","title","item","startTime","from_date","endTime","to_date","add","date","setDate","modal","setModal","initialValues","toggle","width","values","data","DMY","format","crossDMY","request_date","undefined","addDayOffs","updateDayOffs","id","handleSubmit","isSubmitting","errors","name","defaultOption","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux';\nimport { Row, Col, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { Field, Form, Formik } from \"formik\";\nimport * as Yup from 'yup';\nimport { ReactstrapInput, ReactstrapSelect } from \"reactstrap-formik\";\n\nimport * as dayOffActions from '../../actions/dayOffs'\nimport * as options from './selectOptions'\nimport Time from '../../../commons/const/Time'\nimport DatePicker from '../../../commons/components/dateRangePicker'\nimport moment from 'moment';\n\nconst validationSchema = Yup.object({\n  status: Yup.string().required(),\n  reason: Yup.string().max(200).matches(/[a-zA-Z]$/, 'Invalid reason!').required()\n})\n\nfunction DayOffForm(props) {\n  const {\n    dayOffActions,\n    buttonLabel,\n    title,\n    item\n  } = props\n\n  const [date, setDate] = useState(\n    item ? {\n      startTime: item.from_date,\n      endTime: item.to_date\n    } : {\n        startTime: moment(),\n        endTime: moment().add(1, 'day')\n      })\n  const [modal, setModal] = useState(false);\n  const initialValues = item ? {\n    status: item.status,\n    reason: item.reason\n  } : {\n      status: '',\n      reason: ''\n    }\n\n  const toggle = () => setModal(!modal);\n  return (\n    <div>\n      <Button style={{ width: \"100px\" }} color=\"info\" onClick={toggle}>{buttonLabel}</Button>\n      <Modal isOpen={modal} toggle={toggle} centered={true}>\n        <Formik\n          initialValues={initialValues}\n          validationSchema={validationSchema}\n          onSubmit={values => {\n            const data = {\n              ...values,\n              from_date: moment(date.startTime, Time.DMY).format(Time.crossDMY),\n              to_date: moment(date.endTime, Time.DMY).format(Time.crossDMY),\n              request_date: moment().format(Time.crossDMY)\n            }\n            if (item === undefined) dayOffActions.addDayOffs(data)\n            else dayOffActions.updateDayOffs(item.id, data)\n            toggle()\n          }}\n        >\n          {({ handleSubmit, isSubmitting, values, errors }) => (\n            < Form onSubmit={handleSubmit}>\n              <ModalHeader toggle={toggle}>{title}</ModalHeader>\n              <ModalBody>\n\n                <Row>\n                  <Col xs=\"12\">\n                    <DatePicker\n                      block={true}\n                      setDate={setDate}\n                    />\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col xs=\"12\">\n                    <Field\n                      label=\"Status\"\n                      name=\"status\"\n                      component={ReactstrapSelect}\n                      inputprops={{\n                        name: \"status\",\n                        id: \"status\",\n                        options: options.status,\n                        defaultOption: \"Select\"\n                      }}\n                    />\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col xs=\"12\">\n                    <Field\n                      label=\"Reason\"\n                      name=\"reason\"\n                      type=\"textarea\"\n                      component={ReactstrapInput}\n                    />\n                  </Col>\n                </Row>\n              </ModalBody>\n              <ModalFooter>\n                <Button color=\"primary\" onClick={toggle}>Cancel</Button>{' '}\n                <Button color=\"secondary\" type=\"submit\">Submit</Button>\n              </ModalFooter>\n            </Form>\n          )}\n        </Formik>\n      </Modal>\n    </div >\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    dayOffActions: bindActionCreators(dayOffActions, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayOffForm);"]},"metadata":{},"sourceType":"module"}