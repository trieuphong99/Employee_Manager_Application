{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/phong/rails/imp/app/javascript/staff/components/timesheets/tabTimesheet/index.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Breadcrumb, BreadcrumbItem, UncontrolledPopover, Button, Badge } from \"reactstrap\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport * as actions from \"../../../actions/timeSheet\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\nimport _ from \"lodash\";\nimport DateRangePicker from \"../../dateRangePicker\";\nimport \"react-dates/lib/css/_datepicker.css\";\nimport { FaSortNumericDown, FaSortNumericUp } from \"react-icons/fa\";\nimport { MdVisibility, MdVisibilityOff } from \"react-icons/md\";\nimport { bindActionCreators } from \"redux\";\nimport constants from \"../../../../commons/components/constantTimesheets\";\nimport Time from \"../../../../commons/const/Time\";\nimport OffSet from \"./offset\";\nimport EnoughOffset from \"./enoughOffset\";\nimport NotEnoughOffset from \"./notEnoughOffset\";\nimport EditOffset from \"./editOffset\";\nimport Pagination from \"../../../../commons/components/pagination\";\nimport calculateTimeWork from \"../../../../commons/function/calculateTimeWork\";\nimport calculateTimeOff from \"../../../../commons/function/calculateTimeOff\";\nimport SortTarget from \"../../../../commons/components/sortTarget\";\nimport CustomPicker from \"../../../../commons/components/dateRangePicker/customPicker\";\nimport { pickDate as _pickDate } from \"../../../actions/dateRange\";\nimport EditReasonModal from \"./editReasonModal\";\nimport Report from '../../report';\n\nvar listTimesheets = function listTimesheets(props) {\n  var reduxStartDate = props.reduxStartDate,\n      reduxEndDate = props.reduxEndDate,\n      timeSheet = props.timeSheet,\n      dataDetail = props.dataDetail,\n      actions = props.actions;\n\n  var _useState = useState(\"All\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      type = _useState2[0],\n      setType = _useState2[1];\n\n  var _useState3 = useState(\"DESC\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sortType = _useState4[0],\n      setSortType = _useState4[1];\n\n  var _useState5 = useState(\"date\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortField = _useState6[0],\n      setSortField = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentPage = _useState8[0],\n      setCurrentPage = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isOpen = _useState10[0],\n      setOpen = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedItem = _useState12[0],\n      setSelectedItem = _useState12[1]; // const [id, setID] = useState(\"\");\n\n\n  useEffect(function () {\n    actions.getStaffTimeSheet({\n      startTime: reduxStartDate,\n      endTime: reduxEndDate,\n      currentPage: currentPage,\n      sortType: sortType,\n      sortField: sortField,\n      type: type\n    }); // eslint-disable-next-line\n  }, [reduxStartDate, reduxEndDate, currentPage, sortType, sortField, type]);\n\n  var letSort = function letSort(field) {\n    setSortType(sortType === \"DESC\" ? \"ASC\" : \"DESC\");\n    setSortField(field);\n  }; //code show leave\n\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      showLeave = _useState14[0],\n      setShowLeave = _useState14[1];\n\n  var reload = function reload() {\n    actions.getStaffTimeSheet({\n      startTime: reduxStartDate,\n      endTime: reduxEndDate,\n      currentPage: currentPage,\n      sortType: sortType,\n      sortField: sortField,\n      type: type\n    });\n  };\n\n  var colors = {\n    failed: 'danger',\n    rejected: 'danger',\n    waiting: 'warning',\n    doing: 'warning',\n    success: 'success',\n    Failed: 'danger',\n    Rejected: 'danger',\n    Waiting: 'warning',\n    Doing: 'warning',\n    Success: 'success'\n  };\n  var refShowLeave = useRef();\n\n  var clickOnLeaveList = function clickOnLeaveList() {\n    setShowLeave(true);\n    document.addEventListener(\"click\", clickOutSide);\n  };\n\n  var clickOutSide = function clickOutSide(event) {\n    var target = event.target;\n\n    if (refShowLeave.current !== null) {\n      if (!refShowLeave.current.contains(target)) {\n        setShowLeave(false);\n        document.removeEventListener(\"click\", clickOutSide);\n      }\n    }\n  };\n\n  useEffect(function () {\n    return function () {\n      if (showLeave === true) document.removeEventListener(\"click\", clickOutSide);\n    }; // eslint-disable-next-line\n  }, [showLeave]);\n  useEffect(function () {\n    return function () {\n      return document.removeEventListener(\"click\", clickOutSide);\n    }; // eslint-disable-next-line\n  }, []); //code show leave\n\n  var Offset = function Offset(_ref) {\n    var item = _ref.item,\n        time_work = _ref.time_work,\n        status = _ref.status;\n\n    // compare current date with compensated_by date\n    // if status is waiting and not overdue u can edit the request\n    if ((status === \"waiting\" || status === \"Waiting\") && (moment().diff(moment(item.compensated_by, Time.crossDMY), 'days') > 0 || item.compensated_by === null)) {\n      return /*#__PURE__*/React.createElement(EditOffset, {\n        item: item,\n        reload: reload,\n        inPast: true,\n        labelButton: \"Edit\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 14\n        }\n      });\n    }\n\n    if (time_work <= 8) {\n      // if status is doing or success or time work <= 8, nothing return\n      if (status === \"doing\" || status === \"success\" || status === \"Doing\" || status === \"Success\" || time_work == 8) {\n        //typeof time_work is string\n        return /*#__PURE__*/React.createElement(React.Fragment, null);\n      } // if status is waiting and in the past, u can edit the request\n\n\n      if (status === \"waiting\" || status === \"Waiting\" && moment().diff(moment(item.compensated_by, Time.crossDMY), 'days') <= 0) {\n        return /*#__PURE__*/React.createElement(EditOffset, {\n          item: item,\n          reload: reload,\n          inPast: false,\n          labelButton: \"Edit\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 16\n          }\n        });\n      } // if ur work time < 8, u can commit to do in the future \n\n\n      if (moment().diff(moment(item.date, Time.crossDMY), 'days') === 0) {\n        return /*#__PURE__*/React.createElement(NotEnoughOffset, {\n          dateSelected: item.date,\n          reload: reload,\n          labelButton: \"Offset\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 16\n          }\n        });\n      }\n    } // if status is failed or rejected or time work > 8, u can regist compensate to time work < 8\n\n\n    if (status === \"failed\" || status === \"rejected\" || status === \"Failed\" || status === \"Rejected\" || time_work > 8) {\n      return /*#__PURE__*/React.createElement(EnoughOffset, {\n        dateSelected: item.date,\n        reload: reload,\n        labelButton: \"Offset\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  };\n\n  var toggle = function toggle() {\n    return setOpen(!isOpen);\n  };\n\n  var handleClickDetail = function handleClickDetail(id) {\n    toggle();\n    actions.getDetailTimesheetStaff(id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, timeSheet.data && /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tables-saffs-wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"saffs-search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"times-select\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DateRangePicker, {\n    blockRange: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CustomPicker, {\n    pickDate: _pickDate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tables-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tables-title-up\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, _.map([\"All\", \"In late\", \"Leave early\", \"In late and leave early\"], function (type, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tables-title-item\",\n      onClick: function onClick() {\n        return setType(type);\n      },\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, \"\".concat(type, \": \").concat(timeSheet.statistic[_.snakeCase(type)]));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tables-title-item show-leave\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"PopoverLeave\",\n    onClick: clickOnLeaveList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, \"Leave\"), showLeave === true ? /*#__PURE__*/React.createElement(MdVisibility, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 41\n    }\n  }) : /*#__PURE__*/React.createElement(MdVisibilityOff, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 60\n    }\n  })), _.map([\"Total work\", \"Total Off\", \"Total Offset\"], function (type, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tables-title-item\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, \"\".concat(type, \": \").concat(timeSheet.statistic[_.snakeCase(type)], \"h\"));\n  })), /*#__PURE__*/React.createElement(UncontrolledPopover, {\n    trigger: \"legacy\",\n    placement: \"bottom\",\n    target: \"PopoverLeave\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tables-title-down popover-body\",\n    ref: refShowLeave,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, _.map(constants.OPTION_DAYOFF, function (type, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tables-title-item no-margin\",\n      onClick: function onClick() {\n        return setType(type);\n      },\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    }, \"\".concat(type, \": \").concat(timeSheet.statistic[_.snakeCase(type)]));\n  })))), timeSheet.data.length === 0 ? null : /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(SortTarget, {\n    type: \"Date\",\n    value: \"Date\",\n    sortType: sortType,\n    sortField: sortField,\n    letSort: letSort,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, \"CheckIn\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, \"CheckOut\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 21\n    }\n  }, \"Work\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 21\n    }\n  }, \"Off\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      border: \"#fff\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, \"Compensate to\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, \"Compensated by\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, _.map(timeSheet.data, function (item, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      onClick: function onClick() {\n        handleClickDetail(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }\n    }, item.date), /*#__PURE__*/React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: moment(item.start_at, Time.HM).isAfter(moment(Time.startWork, Time.HM)) === true\n      }),\n      onClick: function onClick() {\n        handleClickDetail(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 23\n      }\n    }, item.start_at), /*#__PURE__*/React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: moment(item.end_at, Time.HM).isBefore(moment(Time.endWork, Time.HM)) === true\n      }),\n      onClick: function onClick() {\n        handleClickDetail(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 23\n      }\n    }, item.end_at), /*#__PURE__*/React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: item.time_work < 8\n      }),\n      onClick: function onClick() {\n        handleClickDetail(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 23\n      }\n    }, calculateTimeWork(item.time_work)), /*#__PURE__*/React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: item.time_off > 0\n      }),\n      onClick: function onClick() {\n        handleClickDetail(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 23\n      }\n    }, calculateTimeOff(item.time_off)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"success\",\n      onClick: function onClick() {\n        return setSelectedItem(item);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 27\n      }\n    }, \"Report\")), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        border: \"#fff\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 23\n      }\n    }, item.compensate_to), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 23\n      }\n    }, item.compensated_by), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      href: \"#\",\n      color: colors[item.compensation_status],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 27\n      }\n    }, _.upperFirst(item.compensation_status))), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"setting-button\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Offset, {\n      item: item,\n      time_work: item.time_work,\n      status: item.compensation_status,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 25\n      }\n    })));\n  }), dataDetail && /*#__PURE__*/React.createElement(EditReasonModal, {\n    modal: isOpen,\n    toggle: toggle,\n    data: dataDetail,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Pagination, {\n    totalPage: Number(timeSheet.statistic.total_page),\n    pageChange: function pageChange(x) {\n      return setCurrentPage(x);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }\n  }), selectedItem !== null && /*#__PURE__*/React.createElement(Report, {\n    item: selectedItem,\n    setSelectedItem: setSelectedItem,\n    reload: reload,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 39\n    }\n  }))));\n};\n\nvar mapStatetoProps = function mapStatetoProps(state) {\n  return {\n    timeSheet: state.timeSheet.data,\n    dataDetail: state.timeSheet.detail,\n    reduxStartDate: state.dateRange.startDate.format(Time.crossDMY),\n    reduxEndDate: state.dateRange.endDate.format(Time.crossDMY)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(actions, dispatch),\n    pickDate: function pickDate() {\n      return dispatch(_pickDate);\n    }\n  };\n};\n\nexport default connect(mapStatetoProps, mapDispatchToProps)(listTimesheets);","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/staff/components/timesheets/tabTimesheet/index.js"],"names":["React","useState","useEffect","useRef","Link","Breadcrumb","BreadcrumbItem","UncontrolledPopover","Button","Badge","connect","useDispatch","useSelector","actions","moment","classNames","_","DateRangePicker","FaSortNumericDown","FaSortNumericUp","MdVisibility","MdVisibilityOff","bindActionCreators","constants","Time","OffSet","EnoughOffset","NotEnoughOffset","EditOffset","Pagination","calculateTimeWork","calculateTimeOff","SortTarget","CustomPicker","pickDate","EditReasonModal","Report","listTimesheets","props","reduxStartDate","reduxEndDate","timeSheet","dataDetail","type","setType","sortType","setSortType","sortField","setSortField","currentPage","setCurrentPage","isOpen","setOpen","selectedItem","setSelectedItem","getStaffTimeSheet","startTime","endTime","letSort","field","showLeave","setShowLeave","reload","colors","failed","rejected","waiting","doing","success","Failed","Rejected","Waiting","Doing","Success","refShowLeave","clickOnLeaveList","document","addEventListener","clickOutSide","event","target","current","contains","removeEventListener","Offset","item","time_work","status","diff","compensated_by","crossDMY","date","toggle","handleClickDetail","id","getDetailTimesheetStaff","data","map","index","statistic","snakeCase","OPTION_DAYOFF","length","border","red_text","start_at","HM","isAfter","startWork","end_at","isBefore","endWork","time_off","compensate_to","compensation_status","upperFirst","Number","total_page","x","mapStatetoProps","state","detail","dateRange","startDate","format","endDate","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Breadcrumb, BreadcrumbItem, UncontrolledPopover, Button, Badge } from \"reactstrap\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport * as actions from \"../../../actions/timeSheet\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\nimport _ from \"lodash\";\nimport DateRangePicker from \"../../dateRangePicker\";\nimport \"react-dates/lib/css/_datepicker.css\";\nimport { FaSortNumericDown, FaSortNumericUp } from \"react-icons/fa\";\nimport { MdVisibility, MdVisibilityOff } from \"react-icons/md\";\nimport { bindActionCreators } from \"redux\";\nimport constants from \"../../../../commons/components/constantTimesheets\";\n\nimport Time from \"../../../../commons/const/Time\";\nimport OffSet from \"./offset\";\nimport EnoughOffset from \"./enoughOffset\";\nimport NotEnoughOffset from \"./notEnoughOffset\";\nimport EditOffset from \"./editOffset\";\nimport Pagination from \"../../../../commons/components/pagination\";\nimport calculateTimeWork from \"../../../../commons/function/calculateTimeWork\";\nimport calculateTimeOff from \"../../../../commons/function/calculateTimeOff\";\nimport SortTarget from \"../../../../commons/components/sortTarget\";\nimport CustomPicker from \"../../../../commons/components/dateRangePicker/customPicker\";\nimport { pickDate } from \"../../../actions/dateRange\";\nimport EditReasonModal from \"./editReasonModal\";\nimport Report from '../../report';\n\nconst listTimesheets = (props) => {\n  const { reduxStartDate, reduxEndDate, timeSheet, dataDetail, actions } = props;\n  const [type, setType] = useState(\"All\");\n  const [sortType, setSortType] = useState(\"DESC\");\n  const [sortField, setSortField] = useState(\"date\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isOpen, setOpen] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(null)\n  // const [id, setID] = useState(\"\");\n  \n  useEffect(() => {\n    actions.getStaffTimeSheet({\n      startTime: reduxStartDate,\n      endTime: reduxEndDate,\n      currentPage,\n      sortType,\n      sortField,\n      type,\n    });\n    // eslint-disable-next-line\n  }, [reduxStartDate, reduxEndDate, currentPage, sortType, sortField, type]);\n\n  const letSort = (field) => {\n    setSortType(sortType === \"DESC\" ? \"ASC\" : \"DESC\");\n    setSortField(field);\n  };\n  //code show leave\n  const [showLeave, setShowLeave] = useState(false);\n  const reload = () => {\n    actions.getStaffTimeSheet({ startTime: reduxStartDate, endTime: reduxEndDate, currentPage, sortType, sortField, type });\n  }\n\n  const colors = {\n    failed: 'danger',\n    rejected: 'danger',\n    waiting: 'warning',\n    doing: 'warning',\n    success: 'success',\n    Failed: 'danger',\n    Rejected: 'danger',\n    Waiting: 'warning',\n    Doing: 'warning',\n    Success: 'success',\n  }\n  const refShowLeave = useRef();\n  const clickOnLeaveList = () => {\n    setShowLeave(true);\n    document.addEventListener(\"click\", clickOutSide);\n  };\n  const clickOutSide = (event) => {\n    const { target } = event;\n    if (refShowLeave.current !== null) {\n      if (!refShowLeave.current.contains(target)) {\n        setShowLeave(false);\n        document.removeEventListener(\"click\", clickOutSide);\n      }\n    }\n  };\n  useEffect(() => {\n    return () => {\n      if (showLeave === true)\n        document.removeEventListener(\"click\", clickOutSide);\n    };\n    // eslint-disable-next-line\n  }, [showLeave]);\n  useEffect(() => {\n    return () => document.removeEventListener(\"click\", clickOutSide);\n    // eslint-disable-next-line\n  }, []);\n  //code show leave\n  const Offset = ({ item, time_work, status }) => {\n    // compare current date with compensated_by date\n    // if status is waiting and not overdue u can edit the request\n    if ((status === \"waiting\" || status === \"Waiting\") && (moment().diff(moment(item.compensated_by, Time.crossDMY), 'days') > 0 || item.compensated_by === null)) {\n      return <EditOffset item={item} reload={reload} inPast={true} labelButton=\"Edit\" />\n    }\n    if (time_work <= 8) {\n      // if status is doing or success or time work <= 8, nothing return\n      if (status === \"doing\" || status === \"success\" || status === \"Doing\" || status === \"Success\" || time_work == 8) { //typeof time_work is string\n        return <></>\n      }\n      // if status is waiting and in the past, u can edit the request\n      if ((status === \"waiting\" || status === \"Waiting\" && moment().diff(moment(item.compensated_by, Time.crossDMY), 'days') <= 0)) {\n        return <EditOffset item={item} reload={reload} inPast={false} labelButton=\"Edit\" />\n      }\n      // if ur work time < 8, u can commit to do in the future \n      if (moment().diff(moment(item.date, Time.crossDMY), 'days') === 0) {\n        return <NotEnoughOffset dateSelected={item.date} reload={reload} labelButton=\"Offset\" />\n      }\n    }\n    // if status is failed or rejected or time work > 8, u can regist compensate to time work < 8\n    if (status === \"failed\" || status === \"rejected\" || status === \"Failed\" || status === \"Rejected\" || time_work > 8) {\n      return <EnoughOffset dateSelected={item.date} reload={reload} labelButton=\"Offset\" />\n    }\n    return <></>\n  }\n  const toggle = () => setOpen(!isOpen);\n  const handleClickDetail = (id) => {\n    toggle();\n    actions.getDetailTimesheetStaff(id);\n  };\n  \n  return (\n    <div>\n      {timeSheet.data && (\n        <div>\n          \n          {/*tables-saffs  */}\n          <div className=\"tables-saffs-wrapper\">\n            <div className=\"saffs-search\">\n              <div className=\"times-select\">\n                <DateRangePicker blockRange=\"none\" />\n              </div>\n              <CustomPicker pickDate={pickDate} />\n            </div>\n            <div className=\"tables-title\">\n              <div className=\"tables-title-up\">\n                {_.map(\n                  [\"All\", \"In late\", \"Leave early\", \"In late and leave early\"],\n                  (type, index) => (\n                    <div\n                      className=\"tables-title-item\"\n                      onClick={() => setType(type)}\n                      key={index}\n                    >{`${type}: ${\n                      timeSheet.statistic[_.snakeCase(type)]\n                    }`}</div>\n                  )\n                )}\n                <div className=\"tables-title-item show-leave\">\n                  <span id=\"PopoverLeave\" onClick={clickOnLeaveList}>\n                    Leave\n                  </span>\n                  {showLeave === true ? <MdVisibility /> : <MdVisibilityOff />}\n                </div>\n                {_.map(\n                  [\"Total work\", \"Total Off\", \"Total Offset\"],\n                  (type, index) => (\n                    <div className=\"tables-title-item\" key={index}>{`${type}: ${\n                      timeSheet.statistic[_.snakeCase(type)]\n                    }h`}</div>\n                  )\n                )}\n              </div>\n              <UncontrolledPopover\n                trigger=\"legacy\"\n                placement=\"bottom\"\n                target=\"PopoverLeave\"\n              >\n                <div\n                  className=\"tables-title-down popover-body\"\n                  ref={refShowLeave}\n                >\n                  {_.map(constants.OPTION_DAYOFF, (type, index) => (\n                    <div\n                      className=\"tables-title-item no-margin\"\n                      onClick={() => setType(type)}\n                      key={index}\n                    >{`${type}: ${\n                      timeSheet.statistic[_.snakeCase(type)]\n                    }`}</div>\n                  ))}\n                </div>\n              </UncontrolledPopover>\n            </div>\n            {timeSheet.data.length === 0 ? null : (\n              <table className=\"table table-hover\">\n                <thead>\n                  <tr>\n                    <SortTarget\n                      type=\"Date\"\n                      value=\"Date\"\n                      sortType={sortType}\n                      sortField={sortField}\n                      letSort={letSort}\n                    />\n                    <th>CheckIn</th>\n                    <th>CheckOut</th>\n                    <th>Work</th>\n                    <th>Off</th>\n                    <th />\n                    <th style={{ border: \"#fff\" }} />\n                    <th>Compensate to</th>\n                    <th>Compensated by</th>\n                    <th>Status</th>\n                    <th />\n                  </tr>\n                </thead>\n                <tbody>\n                  {_.map(timeSheet.data, (item, index) => (\n                    <tr\n                      key={index}\n                    >\n                      <td\n                        onClick={() => {\n                          handleClickDetail(item.id)\n                        }}\n                      >\n                        {item.date}\n                      </td>\n                      <td\n                        className={classNames(\"\", {\n                          red_text:\n                            moment(item.start_at, Time.HM).isAfter(\n                              moment(Time.startWork, Time.HM)\n                            ) === true,\n                        })}\n                        onClick={() => {\n                          handleClickDetail(item.id)\n                        }}\n                      >\n                        {item.start_at}\n                      </td>\n                      <td\n                        className={classNames(\"\", {\n                          red_text:\n                            moment(item.end_at, Time.HM).isBefore(\n                              moment(Time.endWork, Time.HM)\n                            ) === true,\n                        })}\n                        onClick={() => {\n                          handleClickDetail(item.id)\n                        }}\n                      >\n                        {item.end_at}\n                      </td>\n                      <td\n                        className={classNames(\"\", {\n                          red_text: item.time_work < 8,\n                        })}\n                        onClick={() => {\n                          handleClickDetail(item.id)\n                        }}\n                      >\n                        {calculateTimeWork(item.time_work)}\n                      </td>\n                      <td\n                        className={classNames(\"\", {\n                          red_text: item.time_off > 0,\n                        })}\n                        onClick={() => {\n                          handleClickDetail(item.id)\n                        }}\n                      >\n                        {calculateTimeOff(item.time_off)}\n                      </td>\n                      <td><Button color=\"success\" onClick={() => setSelectedItem(item)}>Report</Button></td>\n                      <td style={{ border: \"#fff\" }} />\n                      <td>{item.compensate_to}</td>\n                      <td>{item.compensated_by}</td>\n                      <td><Badge href=\"#\" color={colors[item.compensation_status]}>{_.upperFirst(item.compensation_status)}</Badge></td>\n                      <td className=\"setting-button\">\n                        <Offset item={item} time_work={item.time_work} status={item.compensation_status} />\n                      </td>\n                    </tr>\n                  ))}\n                  {dataDetail && (\n                        <EditReasonModal\n                          modal={isOpen}\n                          toggle={toggle}\n                          data={dataDetail}\n                        />\n                      )}\n                </tbody>\n              </table>\n            )}\n            \n            <Pagination\n              totalPage={Number(timeSheet.statistic.total_page)}\n              pageChange={(x) => setCurrentPage(x)}\n            />\n            {selectedItem !== null && <Report item={selectedItem} setSelectedItem={setSelectedItem} reload={reload} />}\n          </div>\n          {/*tables-staffs end */}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst mapStatetoProps = (state) => {\n  return {\n    timeSheet: state.timeSheet.data,\n    dataDetail: state.timeSheet.detail,\n    reduxStartDate: state.dateRange.startDate.format(Time.crossDMY),\n    reduxEndDate: state.dateRange.endDate.format(Time.crossDMY),\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    actions: bindActionCreators(actions, dispatch),\n    pickDate: () => dispatch(pickDate),\n  };\n};\nexport default connect(mapStatetoProps, mapDispatchToProps)(listTimesheets);\n"]},"metadata":{},"sourceType":"module"}