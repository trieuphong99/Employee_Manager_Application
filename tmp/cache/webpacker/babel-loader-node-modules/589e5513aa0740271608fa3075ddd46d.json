{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * @license\n *\n * Push v1.0.9\n * =========\n * A compact, cross-browser solution for the JavaScript Notifications API\n *\n * Credits\n * -------\n * Tsvetan Tsvetkov (ttsvetko)\n * Alex Gibson (alexgibson)\n *\n * License\n * -------\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2015-2017 Tyler Nickerson\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n!function (i, t) {\n  \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (i = i || self).Push = t();\n}(this, function () {\n  \"use strict\";\n\n  var i = {\n    errors: {\n      incompatible: \"\".concat(\"PushError:\", \" Push.js is incompatible with browser.\"),\n      invalid_plugin: \"\".concat(\"PushError:\", \" plugin class missing from plugin manifest (invalid plugin). Please check the documentation.\"),\n      invalid_title: \"\".concat(\"PushError:\", \" title of notification must be a string\"),\n      permission_denied: \"\".concat(\"PushError:\", \" permission request declined\"),\n      sw_notification_error: \"\".concat(\"PushError:\", \" could not show a ServiceWorker notification due to the following reason: \"),\n      sw_registration_error: \"\".concat(\"PushError:\", \" could not register the ServiceWorker due to the following reason: \"),\n      unknown_interface: \"\".concat(\"PushError:\", \" unable to create notification: unknown interface\")\n    }\n  };\n\n  function t(i) {\n    return (t = \"function\" == typeof Symbol && \"symbol\" == _typeof(Symbol.iterator) ? function (i) {\n      return _typeof(i);\n    } : function (i) {\n      return i && \"function\" == typeof Symbol && i.constructor === Symbol && i !== Symbol.prototype ? \"symbol\" : _typeof(i);\n    })(i);\n  }\n\n  function n(i, t) {\n    if (!(i instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n\n  function e(i, t) {\n    for (var n = 0; n < t.length; n++) {\n      var e = t[n];\n      e.enumerable = e.enumerable || !1, e.configurable = !0, \"value\" in e && (e.writable = !0), Object.defineProperty(i, e.key, e);\n    }\n  }\n\n  function o(i, t, n) {\n    return t && e(i.prototype, t), n && e(i, n), i;\n  }\n\n  function r(i, t) {\n    if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function\");\n    i.prototype = Object.create(t && t.prototype, {\n      constructor: {\n        value: i,\n        writable: !0,\n        configurable: !0\n      }\n    }), t && c(i, t);\n  }\n\n  function s(i) {\n    return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (i) {\n      return i.__proto__ || Object.getPrototypeOf(i);\n    })(i);\n  }\n\n  function c(i, t) {\n    return (c = Object.setPrototypeOf || function (i, t) {\n      return i.__proto__ = t, i;\n    })(i, t);\n  }\n\n  function a(i, t) {\n    return !t || \"object\" != _typeof(t) && \"function\" != typeof t ? function (i) {\n      if (void 0 === i) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return i;\n    }(i) : t;\n  }\n\n  var u = function () {\n    function i(t) {\n      n(this, i), this._win = t, this.GRANTED = \"granted\", this.DEFAULT = \"default\", this.DENIED = \"denied\", this._permissions = [this.GRANTED, this.DEFAULT, this.DENIED];\n    }\n\n    return o(i, [{\n      key: \"request\",\n      value: function value(i, t) {\n        return arguments.length > 0 ? this._requestWithCallback.apply(this, arguments) : this._requestAsPromise();\n      }\n    }, {\n      key: \"_requestWithCallback\",\n      value: function value(i, t) {\n        var n,\n            e = this,\n            o = this.get(),\n            r = !1,\n            s = function s() {\n          var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : e._win.Notification.permission;\n          r || (r = !0, void 0 === n && e._win.webkitNotifications && (n = e._win.webkitNotifications.checkPermission()), n === e.GRANTED || 0 === n ? i && i() : t && t());\n        };\n\n        o !== this.DEFAULT ? s(o) : this._win.webkitNotifications && this._win.webkitNotifications.checkPermission ? this._win.webkitNotifications.requestPermission(s) : this._win.Notification && this._win.Notification.requestPermission ? (n = this._win.Notification.requestPermission(s)) && n.then && n.then(s)[\"catch\"](function () {\n          t && t();\n        }) : i && i();\n      }\n    }, {\n      key: \"_requestAsPromise\",\n      value: function value() {\n        var i = this,\n            t = this.get(),\n            n = t !== this.DEFAULT,\n            e = this._win.Notification && this._win.Notification.requestPermission,\n            o = this._win.webkitNotifications && this._win.webkitNotifications.checkPermission;\n        return new Promise(function (r, s) {\n          var c,\n              a = !1,\n              u = function u(t) {\n            a || (a = !0, !function (t) {\n              return t === i.GRANTED || 0 === t;\n            }(t) ? s() : r());\n          };\n\n          n ? u(t) : o ? i._win.webkitNotifications.requestPermission(function (i) {\n            u(i);\n          }) : e ? (c = i._win.Notification.requestPermission(u)) && c.then && c.then(u)[\"catch\"](s) : r();\n        });\n      }\n    }, {\n      key: \"has\",\n      value: function value() {\n        return this.get() === this.GRANTED;\n      }\n    }, {\n      key: \"get\",\n      value: function value() {\n        return this._win.Notification && this._win.Notification.permission ? this._win.Notification.permission : this._win.webkitNotifications && this._win.webkitNotifications.checkPermission ? this._permissions[this._win.webkitNotifications.checkPermission()] : navigator.mozNotification ? this.GRANTED : this._win.external && this._win.external.msIsSiteMode ? this._win.external.msIsSiteMode() ? this.GRANTED : this.DEFAULT : this.GRANTED;\n      }\n    }]), i;\n  }(),\n      f = function () {\n    function i() {\n      n(this, i);\n    }\n\n    return o(i, null, [{\n      key: \"isUndefined\",\n      value: function value(i) {\n        return void 0 === i;\n      }\n    }, {\n      key: \"isNull\",\n      value: function value(i) {\n        return null === obj;\n      }\n    }, {\n      key: \"isString\",\n      value: function value(i) {\n        return \"string\" == typeof i;\n      }\n    }, {\n      key: \"isFunction\",\n      value: function value(i) {\n        return i && \"[object Function]\" === {}.toString.call(i);\n      }\n    }, {\n      key: \"isObject\",\n      value: function value(i) {\n        return \"object\" === t(i);\n      }\n    }, {\n      key: \"objectMerge\",\n      value: function value(i, t) {\n        for (var n in t) {\n          i.hasOwnProperty(n) && this.isObject(i[n]) && this.isObject(t[n]) ? this.objectMerge(i[n], t[n]) : i[n] = t[n];\n        }\n      }\n    }]), i;\n  }(),\n      l = function i(t) {\n    n(this, i), this._win = t;\n  },\n      h = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function value() {\n        return void 0 !== this._win.Notification;\n      }\n    }, {\n      key: \"create\",\n      value: function value(i, t) {\n        return new this._win.Notification(i, {\n          icon: f.isString(t.icon) || f.isUndefined(t.icon) || f.isNull(t.icon) ? t.icon : t.icon.x32,\n          body: t.body,\n          tag: t.tag,\n          requireInteraction: t.requireInteraction\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function value(i) {\n        i.close();\n      }\n    }]), t;\n  }(),\n      _ = function (t) {\n    function e() {\n      return n(this, e), a(this, s(e).apply(this, arguments));\n    }\n\n    return r(e, l), o(e, [{\n      key: \"isSupported\",\n      value: function value() {\n        return void 0 !== this._win.navigator && void 0 !== this._win.navigator.serviceWorker;\n      }\n    }, {\n      key: \"getFunctionBody\",\n      value: function value(i) {\n        var t = i.toString().match(/function[^{]+{([\\s\\S]*)}$/);\n        return null != t && t.length > 1 ? t[1] : null;\n      }\n    }, {\n      key: \"create\",\n      value: function value(t, n, e, o, r) {\n        var s = this;\n        this._win.navigator.serviceWorker.register(o), this._win.navigator.serviceWorker.ready.then(function (o) {\n          var c = {\n            id: t,\n            link: e.link,\n            origin: document.location.href,\n            onClick: f.isFunction(e.onClick) ? s.getFunctionBody(e.onClick) : \"\",\n            onClose: f.isFunction(e.onClose) ? s.getFunctionBody(e.onClose) : \"\"\n          };\n          void 0 !== e.data && null !== e.data && (c = Object.assign(c, e.data)), o.showNotification(n, {\n            icon: e.icon,\n            body: e.body,\n            vibrate: e.vibrate,\n            tag: e.tag,\n            data: c,\n            requireInteraction: e.requireInteraction,\n            silent: e.silent\n          }).then(function () {\n            o.getNotifications().then(function (i) {\n              o.active.postMessage(\"\"), r(i);\n            });\n          })[\"catch\"](function (t) {\n            throw new Error(i.errors.sw_notification_error + t.message);\n          });\n        })[\"catch\"](function (t) {\n          throw new Error(i.errors.sw_registration_error + t.message);\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function value() {}\n    }]), e;\n  }(),\n      v = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function value() {\n        return void 0 !== this._win.navigator.mozNotification;\n      }\n    }, {\n      key: \"create\",\n      value: function value(i, t) {\n        var n = this._win.navigator.mozNotification.createNotification(i, t.body, t.icon);\n\n        return n.show(), n;\n      }\n    }]), t;\n  }(),\n      d = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function value() {\n        return void 0 !== this._win.external && void 0 !== this._win.external.msIsSiteMode;\n      }\n    }, {\n      key: \"create\",\n      value: function value(i, t) {\n        return this._win.external.msSiteModeClearIconOverlay(), this._win.external.msSiteModeSetIconOverlay(f.isString(t.icon) || f.isUndefined(t.icon) ? t.icon : t.icon.x16, i), this._win.external.msSiteModeActivate(), null;\n      }\n    }, {\n      key: \"close\",\n      value: function value() {\n        this._win.external.msSiteModeClearIconOverlay();\n      }\n    }]), t;\n  }(),\n      w = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function value() {\n        return void 0 !== this._win.webkitNotifications;\n      }\n    }, {\n      key: \"create\",\n      value: function value(i, t) {\n        var n = this._win.webkitNotifications.createNotification(t.icon, i, t.body);\n\n        return n.show(), n;\n      }\n    }, {\n      key: \"close\",\n      value: function value(i) {\n        i.cancel();\n      }\n    }]), t;\n  }();\n\n  return new (function () {\n    function t(i) {\n      n(this, t), this._currentId = 0, this._notifications = {}, this._win = i, this.Permission = new u(i), this._agents = {\n        desktop: new h(i),\n        chrome: new _(i),\n        firefox: new v(i),\n        ms: new d(i),\n        webkit: new w(i)\n      }, this._configuration = {\n        serviceWorker: \"/serviceWorker.min.js\",\n        fallback: function fallback(i) {}\n      };\n    }\n\n    return o(t, [{\n      key: \"_closeNotification\",\n      value: function value(t) {\n        var n = !0,\n            e = this._notifications[t];\n\n        if (void 0 !== e) {\n          if (n = this._removeNotification(t), this._agents.desktop.isSupported()) this._agents.desktop.close(e);else if (this._agents.webkit.isSupported()) this._agents.webkit.close(e);else {\n            if (!this._agents.ms.isSupported()) throw n = !1, new Error(i.errors.unknown_interface);\n\n            this._agents.ms.close();\n          }\n          return n;\n        }\n\n        return !1;\n      }\n    }, {\n      key: \"_addNotification\",\n      value: function value(i) {\n        var t = this._currentId;\n        return this._notifications[t] = i, this._currentId++, t;\n      }\n    }, {\n      key: \"_removeNotification\",\n      value: function value(i) {\n        var t = !1;\n        return this._notifications.hasOwnProperty(i) && (delete this._notifications[i], t = !0), t;\n      }\n    }, {\n      key: \"_prepareNotification\",\n      value: function value(i, t) {\n        var n,\n            e = this;\n        return n = {\n          get: function get() {\n            return e._notifications[i];\n          },\n          close: function close() {\n            e._closeNotification(i);\n          }\n        }, t.timeout && setTimeout(function () {\n          n.close();\n        }, t.timeout), n;\n      }\n    }, {\n      key: \"_serviceWorkerCallback\",\n      value: function value(i, t, n) {\n        var e = this,\n            o = this._addNotification(i[i.length - 1]);\n\n        navigator && navigator.serviceWorker && (navigator.serviceWorker.addEventListener(\"message\", function (i) {\n          var t = JSON.parse(i.data);\n          \"close\" === t.action && Number.isInteger(t.id) && e._removeNotification(t.id);\n        }), n(this._prepareNotification(o, t))), n(null);\n      }\n    }, {\n      key: \"_createCallback\",\n      value: function value(i, t, n) {\n        var e,\n            o = this,\n            r = null;\n        if (t = t || {}, e = function e(i) {\n          o._removeNotification(i), f.isFunction(t.onClose) && t.onClose.call(o, r);\n        }, this._agents.desktop.isSupported()) try {\n          r = this._agents.desktop.create(i, t);\n        } catch (e) {\n          var s = this._currentId,\n              c = this.config().serviceWorker;\n          this._agents.chrome.isSupported() && this._agents.chrome.create(s, i, t, c, function (i) {\n            return o._serviceWorkerCallback(i, t, n);\n          });\n        } else this._agents.webkit.isSupported() ? r = this._agents.webkit.create(i, t) : this._agents.firefox.isSupported() ? this._agents.firefox.create(i, t) : this._agents.ms.isSupported() ? r = this._agents.ms.create(i, t) : (t.title = i, this.config().fallback(t));\n\n        if (null !== r) {\n          var a = this._addNotification(r),\n              u = this._prepareNotification(a, t);\n\n          f.isFunction(t.onShow) && r.addEventListener(\"show\", t.onShow), f.isFunction(t.onError) && r.addEventListener(\"error\", t.onError), f.isFunction(t.onClick) && r.addEventListener(\"click\", t.onClick), r.addEventListener(\"close\", function () {\n            e(a);\n          }), r.addEventListener(\"cancel\", function () {\n            e(a);\n          }), n(u);\n        }\n\n        n(null);\n      }\n    }, {\n      key: \"create\",\n      value: function value(t, n) {\n        var e,\n            o = this;\n        if (!f.isString(t)) throw new Error(i.errors.invalid_title);\n        return e = this.Permission.has() ? function (i, e) {\n          try {\n            o._createCallback(t, n, i);\n          } catch (i) {\n            e(i);\n          }\n        } : function (e, r) {\n          o.Permission.request().then(function () {\n            o._createCallback(t, n, e);\n          })[\"catch\"](function () {\n            r(i.errors.permission_denied);\n          });\n        }, new Promise(e);\n      }\n    }, {\n      key: \"count\",\n      value: function value() {\n        var i,\n            t = 0;\n\n        for (i in this._notifications) {\n          this._notifications.hasOwnProperty(i) && t++;\n        }\n\n        return t;\n      }\n    }, {\n      key: \"close\",\n      value: function value(i) {\n        var t;\n\n        for (t in this._notifications) {\n          if (this._notifications.hasOwnProperty(t) && this._notifications[t].tag === i) return this._closeNotification(t);\n        }\n      }\n    }, {\n      key: \"clear\",\n      value: function value() {\n        var i,\n            t = !0;\n\n        for (i in this._notifications) {\n          this._notifications.hasOwnProperty(i) && (t = t && this._closeNotification(i));\n        }\n\n        return t;\n      }\n    }, {\n      key: \"supported\",\n      value: function value() {\n        var i = !1;\n\n        for (var t in this._agents) {\n          this._agents.hasOwnProperty(t) && (i = i || this._agents[t].isSupported());\n        }\n\n        return i;\n      }\n    }, {\n      key: \"config\",\n      value: function value(i) {\n        return (void 0 !== i || null !== i && f.isObject(i)) && f.objectMerge(this._configuration, i), this._configuration;\n      }\n    }, {\n      key: \"extend\",\n      value: function value(t) {\n        var n,\n            e = {}.hasOwnProperty;\n        if (!e.call(t, \"plugin\")) throw new Error(i.errors.invalid_plugin);\n\n        for (var o in e.call(t, \"config\") && f.isObject(t.config) && null !== t.config && this.config(t.config), n = new (0, t.plugin)(this.config())) {\n          e.call(n, o) && f.isFunction(n[o]) && (this[o] = n[o]);\n        }\n      }\n    }]), t;\n  }())(\"undefined\" != typeof window ? window : global);\n});","map":null,"metadata":{},"sourceType":"module"}