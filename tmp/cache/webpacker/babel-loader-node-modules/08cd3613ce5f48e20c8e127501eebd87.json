{"ast":null,"code":"import axios from 'axios';\nimport actionTypes from '../../commons/const/actionTypes';\nimport * as accountContans from '../const/account';\nimport { showLoading, hideLoading } from './loading';\nimport { toastError, toastSuccess } from '../../commons/helpers/toastHelpers/index';\nimport { history } from '../../commons/helpers/history/history'; // ---------------API LIST ACCOUNT----------------\n\nexport var fetchListAccount = function fetchListAccount(data) {\n  return {\n    type: accountContans.FETCH_ACCOUNT,\n    payload: {\n      data: data\n    }\n  };\n}; //Request list account\n\nexport var fetchListAccountRequest = function fetchListAccountRequest() {\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios.get('/admin/users').then(function (res) {\n      dispatch(fetchListAccount(res.data));\n    })[\"catch\"](function (error) {\n      toastError(error);\n    })[\"finally\"](dispatch(hideLoading()));\n  };\n}; //Request search account\n\nexport var searchAccountRequest = function searchAccountRequest(text) {\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios.get('/admin/users', {\n      params: {\n        name: text\n      }\n    }).then(function (res) {\n      dispatch(fetchListAccount(res.data));\n    })[\"catch\"](function (error) {\n      toastError(error);\n    })[\"finally\"](dispatch(hideLoading()));\n  };\n}; // ---------------API ADD ACCOUNT----------------\n\nexport var addAccount = function addAccount(data) {\n  return {\n    type: accountContans.ADD_ACCOUNT,\n    payload: {\n      data: data\n    }\n  };\n}; //Request add account\n\nexport var addNewAccountRequest = function addNewAccountRequest(data) {\n  var body = {\n    email: data.email,\n    joining_date: data.joining_date,\n    id_card: data.id_card,\n    official_date: data.official_date,\n    contract_type: data.contract_type,\n    position: data.position,\n    password: data.password,\n    status: true,\n    profile_attributes: {\n      name: data.name,\n      phone_number: data.phone_number,\n      address: data.address,\n      sex: data.sex,\n      date_of_birth: data.date_of_birth\n    },\n    roles_attributes: [{\n      name: data.fname\n    }]\n  };\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios.post('/admin/users', body).then(function (res) {\n      dispatch(addAccount(res.data));\n      toastSuccess('Successful!');\n    })[\"catch\"](function (error) {\n      toastError(error);\n      toastSuccess('Fail!');\n    })[\"finally\"](dispatch(hideLoading()));\n  };\n}; // ---------------API UPDATE ACCOUNT----------------\n\nexport var setAccountEditting = function setAccountEditting(account) {\n  return {\n    type: accountContans.SET_ACCOUNT_EDITTING,\n    payload: {\n      account: account\n    }\n  };\n};\nexport var updateAccount = function updateAccount(data) {\n  return {\n    type: accountContans.UPDATE_ACCOUNT,\n    payload: {\n      data: data\n    }\n  };\n}; //Request update account\n\nexport var updateAccountRequest = function updateAccountRequest(id, data) {\n  var body = {\n    email: data.email,\n    joining_date: data.joining_date,\n    id_card: data.id_card,\n    official_date: data.official_date,\n    contract_type: data.contract_type,\n    position: data.position,\n    status: Boolean(data.status),\n    profile_attributes: {\n      name: data.profile.name,\n      phone_number: data.profile.phone_number,\n      address: data.profile.address,\n      sex: data.profile.sex,\n      date_of_birth: data.profile.date_of_birth\n    }\n  };\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios.put(\"/admin/users/\".concat(id), body).then(function (res) {\n      dispatch(updateAccount(res.data));\n      toastSuccess('Successful!');\n    })[\"catch\"](function (error) {\n      toastError(error);\n      toastSuccess('Fail!');\n    })[\"finally\"](dispatch(hideLoading()));\n  };\n}; // ---------------API DELETE ACCOUNT----------------\n\nexport var deleteAccount = function deleteAccount(data) {\n  return {\n    type: accountContans.DELETE_ACCOUNT,\n    payload: {\n      data: data\n    }\n  };\n}; // delete account\n\nexport var deleteAccountRequest = function deleteAccountRequest(id) {\n  return function (dispatch) {\n    dispatch(showLoading());\n    axios[\"delete\"](\"/admin/users/\".concat(id)).then(function (res) {\n      dispatch(deleteAccount(res.data));\n      toastSuccess('Successful!');\n      history.push('/');\n    })[\"catch\"](function (error) {\n      toastError(error);\n      toastSuccess('Fail!');\n    })[\"finally\"](dispatch(hideLoading()));\n  };\n}; // ---------------API DETAIL ACCOUNT----------------\n\nexport var fetchAccountItem = function fetchAccountItem(data) {\n  return {\n    type: accountContans.DETAIL_ACCOUNT,\n    payload: {\n      data: data\n    }\n  };\n}; // get detailaccount\n\nexport var fetchAccountItemRequest = function fetchAccountItemRequest(id) {\n  return function (dispatch) {\n    axios.get(\"/admin/users/\".concat(id)).then(function (res) {\n      dispatch(fetchAccountItem(res.data));\n    })[\"catch\"](function (error) {\n      toastError(error);\n    })[\"finally\"](dispatch(hideLoading()));\n  };\n};","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/actions/account.js"],"names":["axios","actionTypes","accountContans","showLoading","hideLoading","toastError","toastSuccess","history","fetchListAccount","data","type","FETCH_ACCOUNT","payload","fetchListAccountRequest","dispatch","get","then","res","error","searchAccountRequest","text","params","name","addAccount","ADD_ACCOUNT","addNewAccountRequest","body","email","joining_date","id_card","official_date","contract_type","position","password","status","profile_attributes","phone_number","address","sex","date_of_birth","roles_attributes","fname","post","setAccountEditting","account","SET_ACCOUNT_EDITTING","updateAccount","UPDATE_ACCOUNT","updateAccountRequest","id","Boolean","profile","put","deleteAccount","DELETE_ACCOUNT","deleteAccountRequest","push","fetchAccountItem","DETAIL_ACCOUNT","fetchAccountItemRequest"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAO,KAAKC,cAAZ,MAAgC,kBAAhC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,WAAzC;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,0CAAzC;AACA,SAASC,OAAT,QAAwB,uCAAxB,C,CAEA;;AAEA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,IAAI,EAAI;AACtC,SAAO;AACLC,IAAAA,IAAI,EAAER,cAAc,CAACS,aADhB;AAELC,IAAAA,OAAO,EAAE;AACPH,MAAAA,IAAI,EAAJA;AADO;AAFJ,GAAP;AAMD,CAPM,C,CASP;;AACA,OAAO,IAAMI,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;AAC3C,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACX,WAAW,EAAZ,CAAR;AACAH,IAAAA,KAAK,CAACe,GAAN,CAAU,cAAV,EACGC,IADH,CACQ,UAAAC,GAAG,EAAI;AACXH,MAAAA,QAAQ,CAACN,gBAAgB,CAACS,GAAG,CAACR,IAAL,CAAjB,CAAR;AACD,KAHH,WAIS,UAAAS,KAAK,EAAI;AACdb,MAAAA,UAAU,CAACa,KAAD,CAAV;AACD,KANH,aAQIJ,QAAQ,CAACV,WAAW,EAAZ,CARZ;AAUD,GAZD;AAaD,CAdM,C,CAgBP;;AACA,OAAO,IAAMe,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,IAAD,EAAU;AAC5C,SAAO,UAAAN,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACX,WAAW,EAAZ,CAAR;AACAH,IAAAA,KAAK,CAACe,GAAN,CAAU,cAAV,EAA0B;AACxBM,MAAAA,MAAM,EAAE;AACNC,QAAAA,IAAI,EAAEF;AADA;AADgB,KAA1B,EAKGJ,IALH,CAKQ,UAAAC,GAAG,EAAI;AACXH,MAAAA,QAAQ,CAACN,gBAAgB,CAACS,GAAG,CAACR,IAAL,CAAjB,CAAR;AACD,KAPH,WAQS,UAAAS,KAAK,EAAI;AACdb,MAAAA,UAAU,CAACa,KAAD,CAAV;AACD,KAVH,aAYIJ,QAAQ,CAACV,WAAW,EAAZ,CAZZ;AAcD,GAhBD;AAiBD,CAlBM,C,CAoBP;;AAEA,OAAO,IAAMmB,UAAU,GAAG,SAAbA,UAAa,CAAAd,IAAI,EAAI;AAChC,SAAO;AACLC,IAAAA,IAAI,EAAER,cAAc,CAACsB,WADhB;AAELZ,IAAAA,OAAO,EAAE;AACPH,MAAAA,IAAI,EAAJA;AADO;AAFJ,GAAP;AAMD,CAPM,C,CASP;;AACA,OAAO,IAAMgB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAChB,IAAD,EAAU;AAC5C,MAAMiB,IAAI,GAAG;AACXC,IAAAA,KAAK,EAAElB,IAAI,CAACkB,KADD;AAEXC,IAAAA,YAAY,EAAEnB,IAAI,CAACmB,YAFR;AAGXC,IAAAA,OAAO,EAAEpB,IAAI,CAACoB,OAHH;AAIXC,IAAAA,aAAa,EAAErB,IAAI,CAACqB,aAJT;AAKXC,IAAAA,aAAa,EAAEtB,IAAI,CAACsB,aALT;AAMXC,IAAAA,QAAQ,EAAEvB,IAAI,CAACuB,QANJ;AAOXC,IAAAA,QAAQ,EAAExB,IAAI,CAACwB,QAPJ;AAQXC,IAAAA,MAAM,EAAE,IARG;AASXC,IAAAA,kBAAkB,EAAE;AAClBb,MAAAA,IAAI,EAAEb,IAAI,CAACa,IADO;AAElBc,MAAAA,YAAY,EAAE3B,IAAI,CAAC2B,YAFD;AAGlBC,MAAAA,OAAO,EAAE5B,IAAI,CAAC4B,OAHI;AAIlBC,MAAAA,GAAG,EAAE7B,IAAI,CAAC6B,GAJQ;AAKlBC,MAAAA,aAAa,EAAE9B,IAAI,CAAC8B;AALF,KATT;AAgBXC,IAAAA,gBAAgB,EAAE,CAChB;AACElB,MAAAA,IAAI,EAAEb,IAAI,CAACgC;AADb,KADgB;AAhBP,GAAb;AAsBA,SAAO,UAAA3B,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACX,WAAW,EAAZ,CAAR;AACAH,IAAAA,KAAK,CAAC0C,IAAN,CAAW,cAAX,EAA2BhB,IAA3B,EACGV,IADH,CACQ,UAAAC,GAAG,EAAI;AACXH,MAAAA,QAAQ,CAACS,UAAU,CAACN,GAAG,CAACR,IAAL,CAAX,CAAR;AACAH,MAAAA,YAAY,CAAC,aAAD,CAAZ;AACD,KAJH,WAKS,UAAAY,KAAK,EAAI;AACdb,MAAAA,UAAU,CAACa,KAAD,CAAV;AACAZ,MAAAA,YAAY,CAAC,OAAD,CAAZ;AACD,KARH,aAUIQ,QAAQ,CAACV,WAAW,EAAZ,CAVZ;AAYD,GAdD;AAeD,CAtCM,C,CAwCP;;AAEA,OAAO,IAAMuC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,OAAO,EAAI;AAC3C,SAAO;AACLlC,IAAAA,IAAI,EAAER,cAAc,CAAC2C,oBADhB;AAELjC,IAAAA,OAAO,EAAE;AACPgC,MAAAA,OAAO,EAAPA;AADO;AAFJ,GAAP;AAMD,CAPM;AASP,OAAO,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAAArC,IAAI,EAAI;AACnC,SAAO;AACLC,IAAAA,IAAI,EAAER,cAAc,CAAC6C,cADhB;AAELnC,IAAAA,OAAO,EAAE;AACPH,MAAAA,IAAI,EAAJA;AADO;AAFJ,GAAP;AAMD,CAPM,C,CASP;;AACA,OAAO,IAAMuC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,EAAD,EAAKxC,IAAL,EAAc;AAChD,MAAMiB,IAAI,GAAG;AACXC,IAAAA,KAAK,EAAElB,IAAI,CAACkB,KADD;AAEXC,IAAAA,YAAY,EAAEnB,IAAI,CAACmB,YAFR;AAGXC,IAAAA,OAAO,EAAEpB,IAAI,CAACoB,OAHH;AAIXC,IAAAA,aAAa,EAAErB,IAAI,CAACqB,aAJT;AAKXC,IAAAA,aAAa,EAAEtB,IAAI,CAACsB,aALT;AAMXC,IAAAA,QAAQ,EAAEvB,IAAI,CAACuB,QANJ;AAOXE,IAAAA,MAAM,EAAEgB,OAAO,CAACzC,IAAI,CAACyB,MAAN,CAPJ;AAQXC,IAAAA,kBAAkB,EAAE;AAClBb,MAAAA,IAAI,EAAEb,IAAI,CAAC0C,OAAL,CAAa7B,IADD;AAElBc,MAAAA,YAAY,EAAE3B,IAAI,CAAC0C,OAAL,CAAaf,YAFT;AAGlBC,MAAAA,OAAO,EAAE5B,IAAI,CAAC0C,OAAL,CAAad,OAHJ;AAIlBC,MAAAA,GAAG,EAAE7B,IAAI,CAAC0C,OAAL,CAAab,GAJA;AAKlBC,MAAAA,aAAa,EAAE9B,IAAI,CAAC0C,OAAL,CAAaZ;AALV;AART,GAAb;AAgBA,SAAO,UAAAzB,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACX,WAAW,EAAZ,CAAR;AACAH,IAAAA,KAAK,CAACoD,GAAN,wBAA0BH,EAA1B,GAAgCvB,IAAhC,EACGV,IADH,CACQ,UAAAC,GAAG,EAAI;AACXH,MAAAA,QAAQ,CAACgC,aAAa,CAAC7B,GAAG,CAACR,IAAL,CAAd,CAAR;AACAH,MAAAA,YAAY,CAAC,aAAD,CAAZ;AACD,KAJH,WAKS,UAAAY,KAAK,EAAI;AACdb,MAAAA,UAAU,CAACa,KAAD,CAAV;AACAZ,MAAAA,YAAY,CAAC,OAAD,CAAZ;AACD,KARH,aAUIQ,QAAQ,CAACV,WAAW,EAAZ,CAVZ;AAYD,GAdD;AAeD,CAhCM,C,CAkCP;;AAEA,OAAO,IAAMiD,aAAa,GAAG,SAAhBA,aAAgB,CAAA5C,IAAI,EAAI;AACnC,SAAO;AACLC,IAAAA,IAAI,EAAER,cAAc,CAACoD,cADhB;AAEL1C,IAAAA,OAAO,EAAE;AACPH,MAAAA,IAAI,EAAJA;AADO;AAFJ,GAAP;AAMD,CAPM,C,CASP;;AACA,OAAO,IAAM8C,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACN,EAAD,EAAQ;AAC1C,SAAO,UAAAnC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACX,WAAW,EAAZ,CAAR;AACAH,IAAAA,KAAK,UAAL,wBAA6BiD,EAA7B,GACGjC,IADH,CACQ,UAAAC,GAAG,EAAI;AACXH,MAAAA,QAAQ,CAACuC,aAAa,CAACpC,GAAG,CAACR,IAAL,CAAd,CAAR;AACAH,MAAAA,YAAY,CAAC,aAAD,CAAZ;AACAC,MAAAA,OAAO,CAACiD,IAAR,CAAa,GAAb;AACD,KALH,WAMS,UAAAtC,KAAK,EAAI;AACdb,MAAAA,UAAU,CAACa,KAAD,CAAV;AACAZ,MAAAA,YAAY,CAAC,OAAD,CAAZ;AACD,KATH,aAWIQ,QAAQ,CAACV,WAAW,EAAZ,CAXZ;AAaD,GAfD;AAgBD,CAjBM,C,CAmBP;;AAEA,OAAO,IAAMqD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAhD,IAAI,EAAI;AACtC,SAAO;AACLC,IAAAA,IAAI,EAAER,cAAc,CAACwD,cADhB;AAEL9C,IAAAA,OAAO,EAAE;AACPH,MAAAA,IAAI,EAAJA;AADO;AAFJ,GAAP;AAMD,CAPM,C,CASP;;AACA,OAAO,IAAMkD,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACV,EAAD,EAAQ;AAC7C,SAAO,UAAAnC,QAAQ,EAAI;AACjBd,IAAAA,KAAK,CAACe,GAAN,wBAA0BkC,EAA1B,GACGjC,IADH,CACQ,UAAAC,GAAG,EAAI;AACXH,MAAAA,QAAQ,CAAC2C,gBAAgB,CAACxC,GAAG,CAACR,IAAL,CAAjB,CAAR;AACD,KAHH,WAIS,UAAAS,KAAK,EAAI;AACdb,MAAAA,UAAU,CAACa,KAAD,CAAV;AACD,KANH,aAQIJ,QAAQ,CAACV,WAAW,EAAZ,CARZ;AAUD,GAXD;AAYD,CAbM","sourcesContent":["import axios from 'axios';\nimport actionTypes from '../../commons/const/actionTypes'\nimport * as accountContans from '../const/account';\nimport { showLoading, hideLoading } from './loading';\nimport { toastError, toastSuccess } from '../../commons/helpers/toastHelpers/index';\nimport { history } from '../../commons/helpers/history/history'\n\n// ---------------API LIST ACCOUNT----------------\n\nexport const fetchListAccount = data => {\n  return {\n    type: accountContans.FETCH_ACCOUNT,\n    payload: {\n      data\n    }\n  };\n};\n\n//Request list account\nexport const fetchListAccountRequest = () => {\n  return dispatch => {\n    dispatch(showLoading());\n    axios.get('/admin/users')\n      .then(res => {\n        dispatch(fetchListAccount(res.data));\n      })\n      .catch(error => {\n        toastError(error);\n      })\n      .finally(\n        dispatch(hideLoading())\n      )\n  };\n};\n\n//Request search account\nexport const searchAccountRequest = (text) => {\n  return dispatch => {\n    dispatch(showLoading());\n    axios.get('/admin/users', {\n      params: {\n        name: text\n      }\n    })\n      .then(res => {\n        dispatch(fetchListAccount(res.data));\n      })\n      .catch(error => {\n        toastError(error);\n      })\n      .finally(\n        dispatch(hideLoading())\n      )\n  };\n};\n\n// ---------------API ADD ACCOUNT----------------\n\nexport const addAccount = data => {\n  return {\n    type: accountContans.ADD_ACCOUNT,\n    payload: {\n      data\n    }\n  };\n};\n\n//Request add account\nexport const addNewAccountRequest = (data) => {\n  const body = {\n    email: data.email,\n    joining_date: data.joining_date,\n    id_card: data.id_card,\n    official_date: data.official_date,\n    contract_type: data.contract_type,\n    position: data.position,\n    password: data.password,\n    status: true,\n    profile_attributes: {\n      name: data.name,\n      phone_number: data.phone_number,\n      address: data.address,\n      sex: data.sex,\n      date_of_birth: data.date_of_birth\n    },\n    roles_attributes: [\n      {\n        name: data.fname\n      }\n    ]\n  };\n  return dispatch => {\n    dispatch(showLoading());\n    axios.post('/admin/users', body)\n      .then(res => {\n        dispatch(addAccount(res.data));\n        toastSuccess('Successful!');\n      })\n      .catch(error => {\n        toastError(error);\n        toastSuccess('Fail!');\n      })\n      .finally(\n        dispatch(hideLoading())\n      )\n  };\n};\n\n// ---------------API UPDATE ACCOUNT----------------\n\nexport const setAccountEditting = account => {\n  return {\n    type: accountContans.SET_ACCOUNT_EDITTING,\n    payload: {\n      account,\n    }\n  };\n};\n\nexport const updateAccount = data => {\n  return {\n    type: accountContans.UPDATE_ACCOUNT,\n    payload: {\n      data\n    }\n  };\n};\n\n//Request update account\nexport const updateAccountRequest = (id, data) => {\n  const body = {\n    email: data.email,\n    joining_date: data.joining_date,\n    id_card: data.id_card,\n    official_date: data.official_date,\n    contract_type: data.contract_type,\n    position: data.position,\n    status: Boolean(data.status),\n    profile_attributes: {\n      name: data.profile.name,\n      phone_number: data.profile.phone_number,\n      address: data.profile.address,\n      sex: data.profile.sex,\n      date_of_birth: data.profile.date_of_birth\n    }\n  };\n  return dispatch => {\n    dispatch(showLoading());\n    axios.put(`/admin/users/${id}`, body)\n      .then(res => {\n        dispatch(updateAccount(res.data));\n        toastSuccess('Successful!');\n      })\n      .catch(error => {\n        toastError(error);\n        toastSuccess('Fail!');\n      })\n      .finally(\n        dispatch(hideLoading())\n      )\n  };\n};\n\n// ---------------API DELETE ACCOUNT----------------\n\nexport const deleteAccount = data => {\n  return {\n    type: accountContans.DELETE_ACCOUNT,\n    payload: {\n      data\n    }\n  };\n};\n\n// delete account\nexport const deleteAccountRequest = (id) => {\n  return dispatch => {\n    dispatch(showLoading());\n    axios.delete(`/admin/users/${id}`)\n      .then(res => {\n        dispatch(deleteAccount(res.data));\n        toastSuccess('Successful!');\n        history.push('/');\n      })\n      .catch(error => {\n        toastError(error);\n        toastSuccess('Fail!');\n      })\n      .finally(\n        dispatch(hideLoading())\n      )\n  };\n};\n\n// ---------------API DETAIL ACCOUNT----------------\n\nexport const fetchAccountItem = data => {\n  return {\n    type: accountContans.DETAIL_ACCOUNT,\n    payload: {\n      data\n    }\n  };\n};\n\n// get detailaccount\nexport const fetchAccountItemRequest = (id) => {\n  return dispatch => {\n    axios.get(`/admin/users/${id}`)\n      .then(res => {\n        dispatch(fetchAccountItem(res.data));\n      })\n      .catch(error => {\n        toastError(error);\n      })\n      .finally(\n        dispatch(hideLoading())\n      )\n  };\n};\n"]},"metadata":{},"sourceType":"module"}