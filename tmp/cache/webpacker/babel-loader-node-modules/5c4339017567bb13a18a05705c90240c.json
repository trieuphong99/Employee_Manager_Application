{"ast":null,"code":"var _jsxFileName = \"/home/phong/rails/imp/app/javascript/admin/components/timesheets/index.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Breadcrumb, BreadcrumbItem, UncontrolledPopover } from \"reactstrap\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport * as usersAction from \"../../actions/account\";\nimport * as actions from \"../../actions/timeSheet\";\nimport \"./styles.css\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\nimport DateRangePicker from \"../dateRangePicker\";\nimport { FaSortNumericDown, FaSortNumericUp } from \"react-icons/fa\";\nimport { MdVisibility, MdVisibilityOff } from \"react-icons/md\";\nimport Time from \"../../../commons/const/Time\";\nimport Pagination from \"../../../commons/components/pagination\";\nimport calculateTimeWork from \"../../../commons/function/calculateTimeWork\";\nimport calculateTimeOff from \"../../../commons/function/calculateTimeOff\";\nimport SortTarget from \"../../../commons/components/sortTarget\";\nimport SearchUser from \"../../../commons/components/searchUser/searchUser\";\nimport UpdateModal from \"./updateModal\";\n\nfunction Timesheets(props) {\n  // const { allUser, timeSheet } = props;\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      id = _useState2[0],\n      setID = _useState2[1];\n\n  var reduxStartDate = useSelector(function (state) {\n    return state.dateRange.startDate.format(Time.crossDMY);\n  });\n  var reduxEndDate = useSelector(function (state) {\n    return state.dateRange.endDate.format(Time.crossDMY);\n  });\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      idStaff = _useState4[0],\n      setIDStaff = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentPage = _useState6[0],\n      setCurrentPage = _useState6[1];\n\n  var _useState7 = useState(\"ASC\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      sortType = _useState8[0],\n      setSortType = _useState8[1];\n\n  var _useState9 = useState(\"date\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sortField = _useState10[0],\n      setSortField = _useState10[1];\n\n  var _useState11 = useState(\"All\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      filterType = _useState12[0],\n      setFilterType = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      showLeave = _useState14[0],\n      setShowLeave = _useState14[1];\n\n  var refShowLeave = useRef();\n  var dispatch = useDispatch();\n\n  var letChangeSortType = function letChangeSortType(field) {\n    setSortType(sortType === \"ASC\" ? \"DESC\" : \"ASC\");\n    setSortField(field);\n  };\n\n  useEffect(function () {\n    dispatch(actions.getStaffTimeSheetByAdmin(reduxStartDate, reduxEndDate, idStaff, currentPage, sortType, sortField, filterType)); // eslint-disable-next-line\n  }, [reduxStartDate, reduxEndDate, idStaff, currentPage, sortType, sortField, filterType]);\n  var timeSheet = useSelector(function (state) {\n    return state.timeSheet;\n  });\n\n  var clickOnLeaveList = function clickOnLeaveList() {\n    setShowLeave(true);\n    document.addEventListener(\"click\", clickOutSide);\n  };\n\n  var clickOutSide = function clickOutSide(event) {\n    var target = event.target;\n\n    if (refShowLeave.current !== null) {\n      if (!refShowLeave.current.contains(target)) {\n        setShowLeave(false);\n        document.removeEventListener(\"click\", clickOutSide);\n      }\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(Breadcrumb, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(BreadcrumbItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Home\")), React.createElement(BreadcrumbItem, {\n    active: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Timesheets\")), React.createElement(\"div\", {\n    className: \"tables-saffs-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"saffs-search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"times-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(DateRangePicker, {\n    blockRange: \"none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"saffs-search-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(SearchUser, {\n    onSelectStaff: function onSelectStaff(d) {\n      return setIDStaff(d);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }))), timeSheet.data !== undefined ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"tables-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"tables-title-up\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, _.map([\"All\", \"In late\", \"Leave early\", \"In late and leave early\"], function (type, index) {\n    return React.createElement(\"div\", {\n      className: \"tables-title-item\",\n      onClick: function onClick() {\n        return setFilterType(type);\n      },\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"\".concat(type, \": \").concat(timeSheet.statistic[_.snakeCase(type)]));\n  }), React.createElement(\"div\", {\n    className: \"tables-title-item show-leave\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    id: \"PopoverLeave\",\n    onClick: clickOnLeaveList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Leave\"), showLeave === true ? React.createElement(MdVisibility, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }) : React.createElement(MdVisibilityOff, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })), _.map([\"Total work\", \"Total Off\", \"Total Offset\"], function (type, index) {\n    return React.createElement(\"div\", {\n      className: \"tables-title-item\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"\".concat(type, \": \").concat(timeSheet.statistic[_.snakeCase(type)], \"h\"));\n  })), React.createElement(UncontrolledPopover, {\n    trigger: \"legacy\",\n    placement: \"bottom\",\n    target: \"PopoverLeave\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"tables-title-down popover-body\",\n    ref: refShowLeave,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, _.map([\"Full day-off has allowed and paid\", \"Full day-off has allowed not paid\", \"Full day-off not allowed\", \"Half day-off has allowed and paid\", \"Half day-off has allowed not paid\", \"Half day-off not allowed\"], function (type, index) {\n    return React.createElement(\"div\", {\n      className: \"tables-title-item no-margin\",\n      onClick: function onClick() {\n        return setType(type);\n      },\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"\".concat(type, \": \").concat(timeSheet.statistic[_.snakeCase(type)]));\n  })))), React.createElement(\"table\", {\n    className: \"table table-hover\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Code\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Name\"), React.createElement(SortTarget, {\n    type: \"Date\",\n    value: \"Date\",\n    sortType: sortType,\n    sortField: sortField,\n    letSort: letChangeSortType,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"CheckIn\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"CheckOut\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"Work\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Off\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"Compensate to\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"Compensated by\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, _.map(timeSheet.data, function (item, index) {\n    return React.createElement(\"tr\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, item.code), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, item.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, item.date), React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: moment(item.start_at, Time.HM).isAfter(moment(Time.startWork, Time.HM)) === true\n      }),\n      onClick: function onClick() {\n        return setID(item.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(UpdateModal, {\n      id: id,\n      time: item.start_at,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: moment(item.end_at, Time.HM).isBefore(moment(Time.endWork, Time.HM)) === true\n      }),\n      onClick: function onClick() {\n        return setID(item.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(UpdateModal, {\n      id: id,\n      time: item.end_at,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: item.time_work < 8\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, calculateTimeWork(item.time_work)), React.createElement(\"td\", {\n      className: classNames(\"\", {\n        red_text: item.time_off > 0\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, calculateTimeOff(item.time_off)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, item.compensate_to), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, item.compensated_by), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"Report\")));\n  })))), React.createElement(Pagination, {\n    totalPage: Number(timeSheet.statistic.total_page),\n    pageChange: function pageChange(x) {\n      return setCurrentPage(x);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  })) : null))));\n}\n\nexport default Timesheets;","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/components/timesheets/index.js"],"names":["React","useState","useEffect","useRef","Link","Breadcrumb","BreadcrumbItem","UncontrolledPopover","connect","useDispatch","useSelector","usersAction","actions","_","moment","classNames","DateRangePicker","FaSortNumericDown","FaSortNumericUp","MdVisibility","MdVisibilityOff","Time","Pagination","calculateTimeWork","calculateTimeOff","SortTarget","SearchUser","UpdateModal","Timesheets","props","id","setID","reduxStartDate","state","dateRange","startDate","format","crossDMY","reduxEndDate","endDate","idStaff","setIDStaff","currentPage","setCurrentPage","sortType","setSortType","sortField","setSortField","filterType","setFilterType","showLeave","setShowLeave","refShowLeave","dispatch","letChangeSortType","field","getStaffTimeSheetByAdmin","timeSheet","clickOnLeaveList","document","addEventListener","clickOutSide","event","target","current","contains","removeEventListener","d","data","undefined","map","type","index","statistic","snakeCase","setType","item","code","name","date","red_text","start_at","HM","isAfter","startWork","end_at","isBefore","endWork","time_work","time_off","compensate_to","compensated_by","Number","total_page","x"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Breadcrumb, BreadcrumbItem, UncontrolledPopover } from \"reactstrap\";\nimport { connect, useDispatch, useSelector } from \"react-redux\";\nimport * as usersAction from \"../../actions/account\";\nimport * as actions from \"../../actions/timeSheet\";\nimport \"./styles.css\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\nimport DateRangePicker from \"../dateRangePicker\";\nimport { FaSortNumericDown, FaSortNumericUp } from \"react-icons/fa\";\nimport { MdVisibility, MdVisibilityOff } from \"react-icons/md\";\nimport Time from \"../../../commons/const/Time\";\nimport Pagination from \"../../../commons/components/pagination\";\nimport calculateTimeWork from \"../../../commons/function/calculateTimeWork\";\nimport calculateTimeOff from \"../../../commons/function/calculateTimeOff\";\nimport SortTarget from \"../../../commons/components/sortTarget\";\nimport SearchUser from \"../../../commons/components/searchUser/searchUser\";\nimport UpdateModal from \"./updateModal\";\n\nfunction Timesheets(props) {\n  // const { allUser, timeSheet } = props;\n  const [id, setID] = useState(null);\n  const reduxStartDate = useSelector(state => state.dateRange.startDate.format(Time.crossDMY))\n  const reduxEndDate = useSelector(state => state.dateRange.endDate.format(Time.crossDMY))\n  const [idStaff, setIDStaff] = useState();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [sortType, setSortType] = useState(\"ASC\");\n  const [sortField, setSortField] = useState(\"date\");\n  const [filterType, setFilterType] = useState(\"All\");\n  const [showLeave, setShowLeave] = useState(false);\n  const refShowLeave = useRef();\n\n  const dispatch = useDispatch();\n  const letChangeSortType = field => {\n    setSortType(sortType === \"ASC\" ? \"DESC\" : \"ASC\");\n    setSortField(field);\n  }\n\n  useEffect(() => {\n    dispatch(actions.getStaffTimeSheetByAdmin(reduxStartDate, reduxEndDate, idStaff, currentPage, sortType, sortField, filterType))\n    // eslint-disable-next-line\n  }, [reduxStartDate, reduxEndDate, idStaff, currentPage, sortType, sortField, filterType]);\n  const timeSheet = useSelector(state => state.timeSheet)\n\n  const clickOnLeaveList = () => {\n    setShowLeave(true);\n    document.addEventListener(\"click\", clickOutSide);\n  };\n  const clickOutSide = event => {\n    const { target } = event;\n    if (refShowLeave.current !== null) {\n      if (!refShowLeave.current.contains(target)) {\n        setShowLeave(false);\n        document.removeEventListener(\"click\", clickOutSide);\n      }\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      {/* breadcrumb */}\n      <Breadcrumb>\n        <BreadcrumbItem>\n          <Link to=\"/\">Home</Link>\n        </BreadcrumbItem>\n        <BreadcrumbItem active>Timesheets</BreadcrumbItem>\n      </Breadcrumb>\n      {/* breadcrumb end */}\n      {/*tables-saffs  */}\n      <div className=\"tables-saffs-wrapper\">\n        <div>\n          <div>\n            <div className=\"saffs-search\">\n              <div className=\"times-select\">\n                <DateRangePicker\n                  blockRange=\"none\"\n                />\n              </div>\n              <div className=\"saffs-search-content\">\n                <SearchUser onSelectStaff={d => setIDStaff(d)} />\n              </div>\n            </div>\n            {timeSheet.data !== undefined ? (\n              <div>\n                <div>\n                  <div className=\"tables-title\">\n                    <div className=\"tables-title-up\">\n                      {_.map(\n                        [\n                          \"All\",\n                          \"In late\",\n                          \"Leave early\",\n                          \"In late and leave early\"\n                        ],\n                        (type, index) => (\n                          <div\n                            className=\"tables-title-item\"\n                            onClick={() => setFilterType(type)}\n                            key={index}\n                          >{`${type}: ${\n                            timeSheet.statistic[_.snakeCase(type)]\n                            }`}</div>\n                        )\n                      )}\n                      <div className=\"tables-title-item show-leave\">\n                        <span id=\"PopoverLeave\" onClick={clickOnLeaveList}>\n                          Leave\n                        </span>\n                        {showLeave === true ? (\n                          <MdVisibility />\n                        ) : (\n                            <MdVisibilityOff />\n                          )}\n                      </div>\n                      {_.map(\n                        [\"Total work\", \"Total Off\", \"Total Offset\"],\n                        (type, index) => (\n                          <div\n                            className=\"tables-title-item\"\n                            key={index}\n                          >{`${type}: ${\n                            timeSheet.statistic[_.snakeCase(type)]\n                            }h`}</div>\n                        )\n                      )}\n                    </div>\n                    <UncontrolledPopover\n                      trigger=\"legacy\"\n                      placement=\"bottom\"\n                      target=\"PopoverLeave\"\n                    >\n                      <div\n                        className=\"tables-title-down popover-body\"\n                        ref={refShowLeave}\n                      >\n                        {_.map(\n                          [\n                            \"Full day-off has allowed and paid\",\n                            \"Full day-off has allowed not paid\",\n                            \"Full day-off not allowed\",\n                            \"Half day-off has allowed and paid\",\n                            \"Half day-off has allowed not paid\",\n                            \"Half day-off not allowed\"\n                          ],\n                          (type, index) => (\n                            <div\n                              className=\"tables-title-item no-margin\"\n                              onClick={() => setType(type)}\n                              key={index}\n                            >{`${type}: ${\n                              timeSheet.statistic[_.snakeCase(type)]\n                              }`}</div>\n                          )\n                        )}\n                      </div>\n                    </UncontrolledPopover>\n                  </div>\n                    <table className=\"table table-hover\">\n                      <thead>\n                        <tr>\n                          <th>Code</th>\n                          <th>Name</th>\n                          <SortTarget type=\"Date\" value=\"Date\" sortType={sortType} sortField={sortField} letSort={letChangeSortType} />\n                          <th>CheckIn</th>\n                          <th>CheckOut</th>\n                          <th>Work</th>\n                          <th>Off</th>\n                          {/* <th>Status</th> */}\n                          <th>Compensate to</th>\n                          <th>Compensated by</th>\n                          <th />\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {_.map(timeSheet.data, (item, index) => (\n                          <tr key={index}>\n                            <td>{item.code}</td>\n                            <td>{item.name}</td>\n                            <td>{item.date}</td>\n                            <td\n                              className={classNames(\"\", {\n                                red_text:\n                                  moment(item.start_at, Time.HM).isAfter(\n                                    moment(Time.startWork, Time.HM)\n                                  ) === true\n                              })}\n                              onClick={() => setID(item.id)}\n                            >\n                              <UpdateModal id={id} time={item.start_at} />\n                            </td>\n                            <td\n                              className={classNames(\"\", {\n                                red_text:\n                                  moment(item.end_at, Time.HM).isBefore(\n                                    moment(Time.endWork, Time.HM)\n                                  ) === true\n                              })}\n                              onClick={() => setID(item.id)}\n                            >\n                              <UpdateModal id={id} time={item.end_at} />\n                            </td>\n                            <td\n                              className={classNames(\"\", {\n                                red_text: item.time_work < 8\n                              })}\n                            >\n                              {calculateTimeWork(item.time_work)}\n                            </td>\n                            <td\n                              className={classNames(\"\", {\n                                red_text: item.time_off > 0\n                              })}\n                            >\n                              {calculateTimeOff(item.time_off)}\n                            </td>\n                            {/* <td\n                              className={classNames(\"\", {\n                                red_text: item.status === \"unpaid leave\",\n                                green_text: item.status === \"paid leave\"\n                              })}\n                            >\n                              {item.status}\n                            </td> */}\n                            <td>{item.compensate_to}</td>\n                            <td>{item.compensated_by}</td>\n                            <td>\n                              <button type=\"button\" className=\"btn btn-success\">\n                                Report\n                              </button>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n\n                    </table>\n                  \n                </div>\n                <Pagination\n                  totalPage={Number(timeSheet.statistic.total_page)}\n                  pageChange={x => setCurrentPage(x)}\n                />\n              </div>\n            ) : null}\n          </div>\n        </div>\n      </div>\n      {/*tables-saffs end */}\n    </div>\n  );\n}\n\nexport default Timesheets;\n"]},"metadata":{},"sourceType":"module"}