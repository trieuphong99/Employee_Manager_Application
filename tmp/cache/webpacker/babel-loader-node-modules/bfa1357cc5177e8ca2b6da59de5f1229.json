{"ast":null,"code":"var _jsxFileName = \"/home/phong/rails/imp/app/javascript/admin/components/selection/overTime/overTime.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DatePicker from \"../../dateRangePicker/\";\nimport { Breadcrumb, BreadcrumbItem, Table, Badge } from \"reactstrap\";\nimport Pagination from \"../../../../commons/components/pagination\";\nimport moment from \"moment\";\nimport Time from \"../../../../commons/const/Time\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getListAccOverTime, setIsAllowedOverTime } from \"../../../actions/overTime\";\nimport _ from \"lodash\";\nimport ConfirmModal from \"../../../../commons/components/modal/confirmModal\";\nimport SearchUser from \"../../../../commons/components/searchUser/searchUser\";\nimport SortTarget from \"../../../../commons/components/sortTarget\";\n\nvar OverTime = function OverTime(props) {\n  var reduxStartDate = useSelector(function (state) {\n    return state.dateRange.startDate.format(Time.crossDMY);\n  });\n  var reduxEndDate = useSelector(function (state) {\n    return state.dateRange.endDate.format(Time.crossDMY);\n  });\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      id = _useState2[0],\n      setID = _useState2[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      current_page = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modal = _useState6[0],\n      setModal = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      idStaff = _useState8[0],\n      setIDStaff = _useState8[1];\n\n  var _useState9 = useState(\"confirmation_status\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      sortField = _useState10[0],\n      setSortField = _useState10[1];\n\n  var _useState11 = useState(\"ASC\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      sortType = _useState12[0],\n      setSortType = _useState12[1];\n\n  var toggle = function toggle() {\n    return setModal(!modal);\n  };\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(getListAccOverTime(reduxStartDate, reduxEndDate, idStaff, current_page, sortField, sortType));\n  }, [reduxStartDate, reduxEndDate, idStaff, current_page, sortField, sortType]);\n  var listOvertime = useSelector(function (state) {\n    return state.getListAccOverTime.data;\n  });\n\n  var letSort = function letSort(field) {\n    setSortType(sortType === \"ASC\" ? \"DESC\" : \"ASC\");\n    setSortField(field);\n  };\n\n  var handleClick = function handleClick(item) {\n    dispatch(setIsAllowedOverTime(id, item));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(Breadcrumb, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(BreadcrumbItem, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Home\")), React.createElement(BreadcrumbItem, {\n    active: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Overtime\")), React.createElement(\"div\", {\n    className: \"saffs-search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"times-select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(DatePicker, {\n    blockRange: \"none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"saffs-search-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(SearchUser, {\n    onSelectStaff: function onSelectStaff(d) {\n      return setIDStaff(d);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(Table, {\n    hover: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Code\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Date\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Start time\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"End time\"), React.createElement(\"th\", {\n    className: \"reason\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Reason\"), React.createElement(SortTarget, {\n    type: \"Confirmation_status\",\n    value: \"Confirm\",\n    sortType: sortType,\n    sortField: sortField,\n    letSort: letSort,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, listOvertime.data === undefined || listOvertime.data.length === 0 ? React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    colSpan: 7,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    style: {\n      color: 'red',\n      fontSize: '80%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"No data to display\"))) : _.map(listOvertime.data, function (item, i) {\n    return React.createElement(\"tr\", {\n      key: i++,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, item.code), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, item.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, item.date), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, item.start_at), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, item.end_at), React.createElement(\"td\", {\n      className: \"reason\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, item.reason), React.createElement(\"td\", {\n      onClick: function onClick() {\n        return setID(item.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, item.confirmation_status === \"Waiting\" ? React.createElement(ConfirmModal, {\n      isOpen: modal,\n      toggle: toggle,\n      item: item,\n      confirm: function confirm() {\n        return handleClick(\"confirmed\");\n      },\n      refuse: function refuse() {\n        return handleClick(\"rejected\");\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }) : item.confirmation_status === \"Confirmed\" ? React.createElement(Badge, {\n      href: \"#\",\n      color: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Confirmed\") : React.createElement(Badge, {\n      href: \"#\",\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Rejected\")));\n  })))), React.createElement(\"div\", {\n    className: \"pagination-selections\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Pagination, {\n    totalPage: listOvertime.total_page,\n    pageChange: function pageChange(x) {\n      return setCurrentPage(x);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })));\n};\n\nexport default OverTime;","map":{"version":3,"sources":["/home/phong/rails/imp/app/javascript/admin/components/selection/overTime/overTime.js"],"names":["React","useState","useEffect","Link","DatePicker","Breadcrumb","BreadcrumbItem","Table","Badge","Pagination","moment","Time","useDispatch","useSelector","getListAccOverTime","setIsAllowedOverTime","_","ConfirmModal","SearchUser","SortTarget","OverTime","props","reduxStartDate","state","dateRange","startDate","format","crossDMY","reduxEndDate","endDate","id","setID","current_page","setCurrentPage","modal","setModal","idStaff","setIDStaff","sortField","setSortField","sortType","setSortType","toggle","dispatch","listOvertime","data","letSort","field","handleClick","item","d","undefined","length","color","fontSize","map","i","code","name","date","start_at","end_at","reason","confirmation_status","total_page","x"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport DatePicker from \"../../dateRangePicker/\";\nimport { Breadcrumb, BreadcrumbItem, Table, Badge } from \"reactstrap\";\nimport Pagination from \"../../../../commons/components/pagination\";\nimport moment from \"moment\";\nimport Time from \"../../../../commons/const/Time\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getListAccOverTime,\n  setIsAllowedOverTime\n} from \"../../../actions/overTime\";\nimport _ from \"lodash\";\nimport ConfirmModal from \"../../../../commons/components/modal/confirmModal\";\nimport SearchUser from \"../../../../commons/components/searchUser/searchUser\";\nimport SortTarget from \"../../../../commons/components/sortTarget\";\n\nconst OverTime = props => {\n  const reduxStartDate = useSelector(state => state.dateRange.startDate.format(Time.crossDMY))\n  const reduxEndDate = useSelector(state => state.dateRange.endDate.format(Time.crossDMY))\n  const [id, setID] = useState(null);\n  const [current_page, setCurrentPage] = useState(1);\n  const [modal, setModal] = useState(false);\n  const [idStaff, setIDStaff] = useState();\n  const [sortField, setSortField] = useState(\"confirmation_status\");\n  const [sortType, setSortType] = useState(\"ASC\");\n  const toggle = () => setModal(!modal);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getListAccOverTime(reduxStartDate, reduxEndDate, idStaff, current_page, sortField, sortType));\n  }, [reduxStartDate, reduxEndDate, idStaff, current_page, sortField, sortType]);\n\n  const listOvertime = useSelector(state => state.getListAccOverTime.data);\n  const letSort = field => {\n    setSortType(sortType === \"ASC\" ? \"DESC\" : \"ASC\");\n    setSortField(field);\n  };\n  const handleClick = item => {\n    dispatch(setIsAllowedOverTime(id, item));\n  };\n  return (\n    <div className=\"container-fluid\">\n      <Breadcrumb>\n        <BreadcrumbItem>\n          <Link to=\"/\">Home</Link>\n        </BreadcrumbItem>\n        <BreadcrumbItem active>Overtime</BreadcrumbItem>\n      </Breadcrumb>\n      <div className=\"saffs-search\">\n        <div className=\"times-select\">\n          <DatePicker\n            blockRange=\"none\"\n          />\n        </div>\n        <div className=\"saffs-search-content\">\n          <SearchUser onSelectStaff={d => setIDStaff(d)} />\n        </div>\n      </div>\n      <div>\n        <Table hover>\n          <thead>\n            <tr>\n              <th>Code</th>\n              <th>Name</th>\n              <th>Date</th>\n              <th>Start time</th>\n              <th>End time</th>\n              <th className=\"reason\">Reason</th>\n              <SortTarget type=\"Confirmation_status\" value=\"Confirm\" sortType={sortType} sortField={sortField} letSort={letSort} />\n            </tr>\n          </thead>\n          <tbody>\n            {\n              listOvertime.data === undefined || listOvertime.data.length === 0 ?\n              <tr>\n                <td colSpan={7}><p style={{ color: 'red', fontSize: '80%' }}>No data to display</p></td>\n              </tr>\n              :\n              _.map(listOvertime.data, (item, i) => {\n                return (\n                  <tr key={i++}>\n                    <td>{item.code}</td>\n                    <td>{item.name}</td>\n                    <td>{item.date}</td>\n                    <td>{item.start_at}</td>\n                    <td>{item.end_at}</td>\n                    <td className=\"reason\">{item.reason}</td>\n                    <td onClick={() => setID(item.id)}>\n                      {item.confirmation_status === \"Waiting\" ? (\n                        <ConfirmModal\n                          isOpen={modal}\n                          toggle={toggle}\n                          item={item}\n                          confirm={() => handleClick(\"confirmed\")}\n                          refuse={() => handleClick(\"rejected\")}\n                        />\n                      ) : item.confirmation_status === \"Confirmed\" ? (\n                        <Badge href=\"#\" color=\"success\">Confirmed</Badge>\n                      ) : (\n                            <Badge href=\"#\" color=\"danger\">Rejected</Badge>\n                          )}\n                    </td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </Table>\n      </div>\n      <div className=\"pagination-selections\">\n        <Pagination\n          totalPage={listOvertime.total_page}\n          pageChange={x => setCurrentPage(x)}\n        />\n      </div>\n    </div>\n  );\n};\nexport default OverTime;\n"]},"metadata":{},"sourceType":"module"}